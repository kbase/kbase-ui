define(["bluebird","jquery","numeral","kb/common/html","kb/widget/bases/dataWidget","kb/service/client/workspace","kb/service/utils","datatables_bootstrap"],function(a,b,c,d,e,f,g){"use strict";function h(a){return g.makeWorkspaceObjectRef(a.workspaceId,a.objectId,a.objectVersion)}function i(a,b){var c={columns:["KBase ID","Name","Object ID","Source","Source ID","Type"],rows:[[b.id,b.name,a.getState("params").objectId,b.source,b.source_id,b.type]],classes:["table","table-striped","table-bordered"]};return d.makeTableRotated(c)}function j(a,b){var c=b.contigs.map(function(a){return[a.id,a.length]}),e={columns:["Contig name","Length"],rows:c,classes:["table","table-striped","table-bordered"]};return d.makeTable(e)}function k(g){return e.make({runtime:g.runtime,title:"Contig Set Data View",on:{initialContent:function(){return d.loading("Loading Contig Set data")},fetch:function(b){var c=this;return a["try"](function(){var a=new f(g.runtime.getConfig("services.workspace.url"),{token:c.runtime.service("session").getAuthToken()});return a.get_object_subset([{ref:h(b),included:["contigs/[*]/id","contigs/[*]/length","id","name","source","source_id","type"]}]).then(function(a){c.setState("contigset",a[0].data)})})},render:function(){var a,e=this,f=d.genId(),g=this.getState("contigset");if(g)return a={id:f,tabs:[{label:"Overview",name:"overview",content:i(e,g)},{label:"Contigs",name:"contigs",content:j(e,g)}]},{content:d.makeTabs(a),after:function(){var a={sPaginationType:"full_numbers",iDisplayLength:10,columnDefs:[{width:"80%",targets:0},{width:"20%",targets:1},{render:function(a,b,d){return c(a).format("0,0")},targets:1},{"class":"text-right",targets:1}],initComplete:function(a){var c=this.api(),d=c.data().length,e=c.page.len(),f=c.settings()[0].nTableWrapper;e>=d&&(b(f).find(".dataTables_length").hide(),b(f).find(".dataTables_filter").hide(),b(f).find(".dataTables_paginate").hide(),b(f).find(".dataTables_info").hide())},oLanguage:{sSearch:"Search contig:",sEmptyTable:"No contigs found."}};b("#"+f+' .tab-content [data-name="contigs"] table').dataTable(a)}}}}})}return{make:function(a){return k(a)}}});