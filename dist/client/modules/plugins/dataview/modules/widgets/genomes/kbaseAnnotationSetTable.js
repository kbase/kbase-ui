define(["jquery","kb/common/html","kb/service/client/workspace","kb/widget/legacy/authenticatedWidget","datatables_bootstrap"],function(a,b,c){"use strict";a.KBWidget({name:"AnnotationSetTable",parent:"kbaseAuthenticatedWidget",version:"1.0.0",options:{id:null,ws:null},init:function(a){return this._super(a),this},render:function(){var d=this,e=this.$elem;if(e.empty(),!this.runtime.service("session").isLoggedIn())return void e.append("<div>[Error] You're not logged in</div>");e.append(b.loading("loading data..."));var f=new c(this.runtime.getConfig("services.workspace.url"),{token:this.runtime.service("session").getAuthToken()});return f.get_objects([{ref:d.options.ws+"/"+d.options.id}],function(c){if(e.empty(),0===c.length){var f="[Error] Object "+d.options.id+" can not be found";e.append("<div><p>"+f+">/p></div>")}else{var g,h,i,j=c[0].data.otus,k=[];for(g=0;g<j.length;g+=1)for(h=j[g].functions,i=0;i<h.length;i+=1)k.push([h[i].reference_genes.join("<br>"),h[i].functional_role,h[i].abundance,h[i].confidence,j[g].name]);var l={columns:["features","functional role","abundance","avg e-value","otu"],rows:k,"class":"table table-striped"},m=b.makeTable(l);e.html(m),a("#"+l.generated.id).dataTable()}},function(b){e.empty();var c=a("<div>");c.append(a("<p>").css({padding:"10px 20px"}).text("[Error] "+b.error.message)),e.append(c)}),d},loggedInCallback:function(a,b){return this.render(),this},loggedOutCallback:function(a,b){return this.render(),this}})});