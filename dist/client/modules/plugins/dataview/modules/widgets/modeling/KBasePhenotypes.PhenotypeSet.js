define(["jquery","kb_dataview_widget_modeling_objects","kb_dataview_widget_modeling_tabTable"],function(a,b){"use strict";function c(b){var c=this;this.modeltabs=b,this.setMetadata=function(b){this.workspace=b[7],this.objName=b[1],this.overview={wsid:b[7]+"/"+b[1],objecttype:b[2],owner:b[5],instance:b[4],moddate:b[3]},"Name"in b[10]&&(this.usermeta={name:b[10].Name,source:b[10].Source+"/"+b[10]["Source ID"],numphenotypes:b[10]["Number phenotypes"],type:b[10].Type},a.extend(this.overview,this.usermeta))},this.setData=function(a){this.data=a,this.phenotypes=this.data.phenotypes;for(var b={},d=0;d<this.phenotypes.length;d++){var e=this.phenotypes[d].additionalcompound_refs;e.forEach(function(a){var c=a.split("/"),d=c[c.length-1];b[d]=1})}return this.modeltabs.getBiochemCompounds(Object.keys(b)).then(function(a){for(var b={},d=0;d<a.length;d++)b[a[d].id]=a[d].name;for(var e=0;e<c.phenotypes.length;e++){for(var f=c.phenotypes[e].additionalcompound_refs,g=[],d=0;d<f.length;d++)g.push(b[f[d].split("/").pop()]);c.phenotypes[e].additionalcompound_names=g}})},this.tabList=[{key:"overview",name:"Overview",type:"verticaltbl",rows:[{label:"ID",key:"wsid"},{label:"Object type",key:"objecttype",type:"typelink"},{label:"Owner",key:"owner"},{label:"Version",key:"instance"},{label:"Mod-date",key:"moddate"},{label:"Name",key:"name"},{label:"Source",key:"source"},{label:"Number phenotypes",key:"numphenotypes"},{label:"Phenotype type",key:"type"}]},{key:"phenotypes",name:"Phenotypes",type:"dataTable",columns:[{label:"Growth condition",key:"media_ref",linkformat:"dispWSRef",type:"wstype",wstype:"KBaseFBA.Media"},{label:"Gene KO",type:"wstype",key:"geneko_refs"},{label:"Additional compounds",key:"additionalcompound_names"},{label:"Observed normalized growth",key:"normalizedGrowth"}]}]}b.prototype.KBasePhenotypes_PhenotypeSet=c});