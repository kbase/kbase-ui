define(["kb_widget_dataview_modeling_objects","kb.service.workspace","kb.runtime","bluebird"],function(a,b,c,d){"use strict";function e(e){var f=this;this.tabwidget=e,this.setMetadata=function(a){this.workspace=a[7],this.objName=a[1],this.overview={wsid:a[7]+"/"+a[1],objecttype:a[2],owner:a[5],instance:a[4],moddate:a[3]},"Name"in a[10]&&(this.usermeta={name:a[10].Name,source:a[10].Source+"/"+a[10]["Source ID"],numphenotypes:a[10]["Number phenotypes"],type:a[10].Type},$.extend(this.overview,this.usermeta))},this.setData=function(e){f.data=e;var g=new b(c.getConfig("services.workspace.url"),{token:c.getAuthToken()});return console.log(e),new d.resolve(g.get_objects([{ref:e.phenotypeset_ref}])).then(function(b){var c=new a;return f.phenoset=new c.KBasePhenotypes_PhenotypeSet(f.tabwidget),f.phenoset.setMetadata(b[0].info),f.phenoset.setData(b[0].data)}).then(function(){f.formatObject()})},this.formatObject=function(){f.phenotypes=f.phenoset.phenotypes;for(var a=0;a<f.phenotypes.length;a++){var b=f.phenotypes[a];b.simulatedGrowth=f.data.phenotypeSimulations[a].simulatedGrowthFraction,b.phenoclass=f.data.phenotypeSimulations[a].phenoclass}},this.tabList=[{key:"overview",name:"Overview",type:"verticaltbl",rows:[{label:"ID",key:"wsid"},{label:"Object type",key:"objecttype",type:"typelink"},{label:"Owner",key:"owner"},{label:"Version",key:"instance"},{label:"Mod-date",key:"moddate"},{label:"Name",key:"name"},{label:"Source",key:"source"},{label:"Number phenotypes",key:"numphenotypes"},{label:"Phenotype type",key:"type"}]},{key:"phenotypes",name:"Phenotypes",type:"dataTable",columns:[{label:"Growth condition",key:"media_ref",linkformat:"dispWSRef",type:"wstype",wstype:"KBaseFBA.Media"},{label:"Gene KO",type:"wstype",key:"geneko_refs"},{label:"Additional compounds",key:"additionalcompound_names"},{label:"Observed normalized growth",key:"normalizedGrowth"},{label:"Simulated growth",key:"simulatedGrowth"},{label:"Prediction class",key:"phenoclass"}]}]}a.prototype.KBasePhenotypes_PhenotypeSimulationSet=e});