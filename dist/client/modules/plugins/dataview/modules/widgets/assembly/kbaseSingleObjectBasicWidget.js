define(["jquery","kb/service/client/workspace","kb/common/html","kb/widget/legacy/authenticatedWidget"],function(a,b,c){"use strict";a.KBWidget({name:"kbaseSingleObjectBasicWidget",parent:"kbaseAuthenticatedWidget",version:"1.0.1",options:{objId:null,workspaceId:null,objVer:null},init:function(b){return this._super(b),this.options.landingPageURL="#/dataview/",this.workspaceURL=this.runtime.getConfig("services.workspace.url"),this.$errorPane=a("<div>").addClass("alert alert-danger").hide(),this.$elem.append(this.$errorPane),this.$messagePane=a("<div>"),this.$elem.append(this.$messagePane),this.$mainPane=a("<div>"),this.$elem.append(this.$mainPane),this},loggedInCallback:function(a,c){return this.ws=new b(this.workspaceURL,c),this.render(),this},loggedOutCallback:function(a,b){return this.ws=null,this.isLoggedIn=!1,this},render:function(){var a=this;a.loading(!0);var b=a.buildObjectIdentity(a.options.workspaceId,a.options.objId,a.options.objVer);this.ws.get_objects([b],function(b){a.loading(!1),a.buildWidgetContent(b[0].data)},function(b){a.loading(!1),a.showError(b)})},buildWidgetContent:function(b){var c=this.$mainPane,d=this.getDataModel(b);c.append(d.description);var e=a('<table class="table table-striped table-bordered" />').css("width","100%").css("margin"," 1em 0 0 0");c.append(e);for(var f=0;f<d.items.length;f++){var g=d.items[f];g.header?e.append(this.makeHeaderRow(g.name,g.value)):e.append(this.makeRow(g.name,g.value))}},getDataModel:function(a){return{description:"Example description for the object: "+JSON.stringify(a),items:[{name:"name1",value:"value1"},{name:"name2",value:"value2"},{header:"1",name:"Group title 2"},{name:"name2.1",value:"value2.1"},{name:"name2.2",value:"value2.2"}]}},makeHeaderRow:function(b){return a("<tr/>").append(a("<td colspan='2'/>").append(a("<b />").append(b)))},makeRow:function(b,c){return a("<tr/>").append(a("<th />").css("width","20%").append(b)).append(a("<td />").append(c))},loading:function(a){a?this.showMessage(c.loading()):this.hideMessage()},showMessage:function(b){var c=a("<span/>").append(b);this.$messagePane.append(c),this.$messagePane.show()},hideMessage:function(){this.$messagePane.hide(),this.$messagePane.empty()},buildObjectIdentity:function(a,b,c,d){var e={};return d?e.ref=d:(/^\d+$/.exec(a)?e.wsid=a:e.workspace=a,/^\d+$/.exec(b)?e.objid=b:e.name=b,c&&(e.ver=c)),e},showError:function(a){this.$errorPane.empty(),this.$errorPane.append("<strong>Error when retrieving data.</strong><br><br>"),this.$errorPane.append(a.error.message),this.$errorPane.append("<br>"),this.$errorPane.show()}})});