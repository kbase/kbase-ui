define(["jquery"],function(a){"use strict";function b(b,c,d){var e=1*c.getAttribute("x"),f=1*c.getAttribute("y"),g=1*c.getAttribute("width"),h=1*c.getAttribute("height");b(a("#"+d.parentNode.id).svg("get").plot.pointsInBounds(e,f,e+g,f+h))}function c(a,b,c){var d=[b.x,c.x].sort(e),f=[b.y,c.y].sort(e);a.setAttribute("x",d[0]),a.setAttribute("y",f[0]),a.setAttribute("width",d[1]-d[0]),a.setAttribute("height",f[1]-f[0])}function d(a,b){return k.x=b.clientX,k.y=b.clientY,k.matrixTransform(a.getScreenCTM().inverse())}function e(a,b){return a-b}function f(a){for(var b=a.split(/[, ]+/),c=0;c<b.length;c++)b[c]=parseFloat(b[c]),isNaN(b[c])&&(b[c]=0);if(b.length%2===1)for(var d=b.length,c=0;d>c;c++)b.push(b[c]);return b}function g(a){for(var b=a.split(/[, ]+/),c=0;c<b.length;c++)b[c]=parseFloat(b[c]),isNaN(b[c])&&(b[c]=0);for(;b.length<4;)b.push(0);return b}function h(b,c){b=b||"","object"==typeof b&&(b=b.nodeValue);var d=a.extend({translateX:0,translateY:0,scaleX:0,scaleY:0,rotateA:0,rotateX:0,rotateY:0,skewX:0,skewY:0,matrix:[0,0,0,0,0,0]},c||{});d.order="";for(var e=/([a-zA-Z]+)\(\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*[\s,]\s*([+-]?[\d\.]+)\s*[\s,]\s*([+-]?[\d\.]+)\s*)?)?)?\)/g,f=e.exec(b);f;){switch(f[1]){case"translate":d.order+="t",d.translateX=parseFloat(f[2]),d.translateY=f[3]?parseFloat(f[3]):0;break;case"scale":d.order+="s",d.scaleX=parseFloat(f[2]),d.scaleY=f[3]?parseFloat(f[3]):d.scaleX;break;case"rotate":d.order+="r",d.rotateA=parseFloat(f[2]),d.rotateX=f[3]?parseFloat(f[3]):0,d.rotateY=f[4]?parseFloat(f[4]):0;break;case"skewX":d.order+="x",d.skewX=parseFloat(f[2]);break;case"skewY":d.order+="y",d.skewY=parseFloat(f[2]);break;case"matrix":d.order+="m",d.matrix=[parseFloat(f[2]),parseFloat(f[3]),parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6]),parseFloat(f[7])]}f=e.exec(b)}if("m"===d.order&&Math.abs(d.matrix[0])===Math.abs(d.matrix[3])&&0!==d.matrix[1]&&Math.abs(d.matrix[1])===Math.abs(d.matrix[2])){var g=180*Math.acos(d.matrix[0])/Math.PI;g=d.matrix[1]<0?360-g:g,d.order="rt",d.rotateA=g,d.rotateX=d.rotateY=0,d.translateX=d.matrix[4],d.translateY=d.matrix[5]}return d}var i="http://www.w3.org/2000/svg",j=document.createElementNS(i,"svg"),k=j.createSVGPoint();window.trackMarquee=function(a,e,f){a.addEventListener("mousedown",function(g){function h(e){var g=d(a,e);c(l,k,g),f&&b(f,l)}function j(){document.documentElement.removeEventListener("mousemove",h,!1),document.documentElement.removeEventListener("mouseup",j,!1),a.removeChild(l),e&&b(e,l,a)}var k=d(a,g),l=document.createElementNS(i,"rect");l.setAttribute("class","marquee"),c(l,k,k),a.appendChild(l),document.documentElement.addEventListener("mousemove",h,!1),document.documentElement.addEventListener("mouseup",j,!1)},!1)},a.each(["x","y","width","height","rx","ry","cx","cy","r","x1","y1","x2","y2","stroke-width","strokeWidth","opacity","fill-opacity","fillOpacity","stroke-opacity","strokeOpacity","stroke-dashoffset","strokeDashOffset","font-size","fontSize","font-weight","fontWeight","letter-spacing","letterSpacing","word-spacing","wordSpacing"],function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);a.cssProps&&(a.cssProps["svg"+d]=a.cssProps["svg-"+c]=c),a.fx.step["svg"+d]=a.fx.step["svg-"+c]=function(b){var e=a.svg._attrNames[c]||c,f=b.elem.attributes.getNamedItem(e);if(!b.set){b.start=f?parseFloat(f.nodeValue):0;var g=a.fn.jquery>="1.6"?"":b.options.curAnim["svg"+d]||b.options.curAnim["svg-"+c];/^[+-]=/.exec(g)&&(b.end=b.start+parseFloat(g.replace(/=/,""))),a(b.elem).css(e,""),b.set=!0}var h=b.pos*(b.end-b.start)+b.start+("%"===b.unit?"%":"");f?f.nodeValue=h:b.elem.setAttribute(e,h)}}),a.fx.step.svgStrokeDashArray=a.fx.step["svg-strokeDashArray"]=a.fx.step["svgStroke-dasharray"]=a.fx.step["svg-stroke-dasharray"]=function(b){var c=b.elem.attributes.getNamedItem("stroke-dasharray");if(!b.set){b.start=f(c?c.nodeValue:"");var d=a.fn.jquery>="1.6"?b.end:b.options.curAnim.svgStrokeDashArray||b.options.curAnim["svg-strokeDashArray"]||b.options.curAnim["svgStroke-dasharray"]||b.options.curAnim["svg-stroke-dasharray"];if(b.end=f(d),/^[+-]=/.exec(d)){if(d=d.split(/[, ]+/),d.length%2===1)for(var e=d.length,g=0;e>g;g++)d.push(d[g]);for(var g=0;g<d.length;g++)/^[+-]=/.exec(d[g])&&(b.end[g]=b.start[g]+parseFloat(d[g].replace(/=/,"")))}b.set=!0}var h=a.map(b.start,function(a,c){return b.pos*(b.end[c]-a)+a}).join(",");c?c.nodeValue=h:b.elem.setAttribute("stroke-dasharray",h)},a.fx.step.svgViewBox=a.fx.step["svg-viewBox"]=function(b){var c=b.elem.attributes.getNamedItem("viewBox");if(!b.set){b.start=g(c?c.nodeValue:"");var d=a.fn.jquery>="1.6"?b.end:b.options.curAnim.svgViewBox||b.options.curAnim["svg-viewBox"];if(b.end=g(d),/^[+-]=/.exec(d)){for(d=d.split(/[, ]+/);d.length<4;)d.push("0");for(var e=0;4>e;e++)/^[+-]=/.exec(d[e])&&(b.end[e]=b.start[e]+parseFloat(d[e].replace(/=/,"")))}b.set=!0}var f=a.map(b.start,function(a,c){return b.pos*(b.end[c]-a)+a}).join(" ");c?c.nodeValue=f:b.elem.setAttribute("viewBox",f)},a.fx.step.svgTransform=a.fx.step["svg-transform"]=function(a){var b=a.elem.attributes.getNamedItem("transform");a.set||(a.start=h(b?b.nodeValue:""),a.end=h(a.end,a.start),a.set=!0);for(var c="",d=0;d<a.end.order.length;d++)switch(a.end.order.charAt(d)){case"t":c+=" translate("+(a.pos*(a.end.translateX-a.start.translateX)+a.start.translateX)+","+(a.pos*(a.end.translateY-a.start.translateY)+a.start.translateY)+")";break;case"s":c+=" scale("+(a.pos*(a.end.scaleX-a.start.scaleX)+a.start.scaleX)+","+(a.pos*(a.end.scaleY-a.start.scaleY)+a.start.scaleY)+")";break;case"r":c+=" rotate("+(a.pos*(a.end.rotateA-a.start.rotateA)+a.start.rotateA)+","+(a.pos*(a.end.rotateX-a.start.rotateX)+a.start.rotateX)+","+(a.pos*(a.end.rotateY-a.start.rotateY)+a.start.rotateY)+")";break;case"x":c+=" skewX("+(a.pos*(a.end.skewX-a.start.skewX)+a.start.skewX)+")";case"y":c+=" skewY("+(a.pos*(a.end.skewY-a.start.skewY)+a.start.skewY)+")";break;case"m":for(var e="",f=0;6>f;f++)e+=","+(a.pos*(a.end.matrix[f]-a.start.matrix[f])+a.start.matrix[f]);c+=" matrix("+e.substr(1)+")"}b?b.nodeValue=c:a.elem.setAttribute("transform",c)},a.each(["fill","stroke"],function(b,c){var d=c.charAt(0).toUpperCase()+c.substr(1);a.fx.step["svg"+d]=a.fx.step["svg-"+c]=function(b){if(!b.set){b.start=a.svg._getColour(b.elem,c);var d="none"===b.end;b.end=d?a.svg._getColour(b.elem.parentNode,c):a.svg._getRGB(b.end),b.end[3]=d,a(b.elem).css(c,""),b.set=!0}var e=b.elem.attributes.getNamedItem(c),f="rgb("+[Math.min(Math.max(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),0),255),Math.min(Math.max(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),0),255),Math.min(Math.max(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),0),255)].join(",")+")";f=b.end[3]&&1===b.state?"none":f,e?e.nodeValue=f:b.elem.setAttribute(c,f)}}),a.svg._getColour=function(b,c){b=a(b);var d;do if(d=b.attr(c)||b.css(c),""!==d&&"none"!==d||b.hasClass(a.svg.markerClassName))break;while(b=b.parent());return a.svg._getRGB(d)},a.svg._getRGB=function(b){var c;return b&&b.constructor===Array?3===b.length||4===b.length?b:l.none:(c=/^rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)jQuery/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/^rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)jQuery/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})jQuery/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])jQuery/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:l[a.trim(b).toLowerCase()]||l.none};var l={"":[255,255,255,1],none:[255,255,255,1],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});