!function(a,b){a.KBWidget({name:"AbundanceDataPcoa",parent:"kbaseAuthenticatedWidget",version:"1.0.0",token:null,options:{id:null,ws:null,x_axis:"1",y_axis:"2"},ws_url:window.kbconfig.urls.workspace,init:function(a){return this._super(a),this},render:function(){var b=this,c=(this.uuidv4(),this.$elem);if(c.empty(),null==b.token)return void c.append("<div>[Error] You're not logged in</div>");c.append('<div><img src="'+b.loading_image+'">&nbsp;&nbsp;loading data...</div>');var d=new Workspace(b.ws_url,{token:b.token});return d.get_objects([{ref:b.options.ws+"/"+b.options.id}],function(a){if(c.empty(),0==a.length){var d="[Error] Object "+b.options.id+" does not exist in workspace "+b.options.ws;c.append("<div><p>"+d+">/p></div>")}else{var e=a[0].data,f=e.data.length,g=parseInt(b.options.x_axis,10)-1,h=parseInt(b.options.y_axis,10)-1;(isNaN(g)||isNaN(h)||0>g||g>f-1||0>h||h>f-1)&&(g=0,h=1);for(var i={},j=new Array(f),k=new Array(f),l=0;f>l;l++){var a={id:e.data[l].id,x:e.data[l].pco[g],y:e.data[l].pco[h]};j[l]=e.data[l].pco[g],k[l]=e.data[l].pco[h],""==e.data[l].group?i[e.data[l].id]=[a]:i.hasOwnProperty(e.data[l].group)?i[e.data[l].group].push(a):i[e.data[l].group]=[a]}var m=GooglePalette(i.length),n={series:[],points:[]},o=0;for(var p in i){for(var q=[],l=0;l<i[p].length;l++)q.push({x:i[p][l].x,y:i[p][l].y});n.series.push({name:p,color:m[o],shape:"circle",filled:1}),n.points.push(q),o+=1}var r=Math.min.apply(null,j),s=Math.max.apply(null,j),t=Math.min.apply(null,k),u=Math.max.apply(null,k),f=0;window.hasOwnProperty("rendererPlot")&&rendererPlot.length&&(f=rendererPlot.length),c.append("<div id='outputPlot"+f+"' style='width: 95%;'></div>");var v=standalonePlot.create({index:f});v.settings.target=document.getElementById("outputPlot"+f),v.settings.data=n,v.settings.x_title="PC"+(g+1).toString(),v.settings.y_title="PC"+(h+1).toString(),v.settings.x_min=r-Math.abs(.1*(s-r)),v.settings.x_max=s+Math.abs(.1*(s-r)),v.settings.y_min=t-Math.abs(.1*(u-t)),v.settings.y_max=u+Math.abs(.1*(u-t)),v.settings.connected=!1,v.settings.show_dots=!0,v.settings.show_legend=!0,v.render(f)}},function(b){c.empty();var d=a("<div>");d.append(a("<p>").css({padding:"10px 20px"}).text("[Error] "+b.error.message)),c.append(d)}),b},loggedInCallback:function(a,b){return this.token=b.token,this.render(),this},loggedOutCallback:function(a,b){return this.token=null,this.render(),this},uuidv4:function(a,b){for(b=a="";a++<36;b+=51*a&52?(15^a?8^Math.random()*(20^a?16:4):4).toString(16):"-");return b}})}(jQuery);