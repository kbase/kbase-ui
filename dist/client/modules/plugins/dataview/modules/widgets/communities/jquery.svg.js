define(["jquery"],function(a){function b(a){try{return!(!window.ActiveXObject||!new ActiveXObject(a))}catch(b){return!1}}function c(){this._settings=[],this._extensions=[],this.regional=[],this.regional[""]={errorLoadingText:"Error loading",notSupportedText:"This browser does not support SVG"},this.local=this.regional[""],this._uuid=(new Date).getTime(),this._renesis=b("RenesisX.RenesisCtrl")}function d(b,c){this._svg=b,this._container=c;for(var d=0;d<a.svg._extensions.length;d++){var e=a.svg._extensions[d];this[e[0]]=new e[1](this)}}function e(){this._path=""}function f(){this._parts=[]}function g(a){return a&&a.constructor===Array}function j(a){return 0===a?0:Math.log(a)/Math.LN10}function k(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)}function l(){this.regional=[],this.regional[""]={percentageText:"Percentage"},this.region=this.regional[""]}function m(b){this._wrapper=b,this._drawNow=!1;for(var c in a.svg.graphing._chartTypes){this._chartType=a.svg.graphing._chartTypes[c];break}this._chartOptions={},this._title={value:"",offset:25,settings:{textAnchor:"middle"}},this._area=[.1,.1,.8,.9],this._chartFormat={fill:"none",stroke:"black"},this._gridlines=[],this._series=[],this._onstatus=null,this._chartCont=this._wrapper.svg(0,0,0,0,{class_:"svg-graph"}),this.xAxis=new o(this),this.xAxis.title("",40),this.yAxis=new o(this),this.yAxis.title("",40),this.x2Axis=null,this.y2Axis=new o(this),this.legend=new p(this),this._drawNow=!0}function n(a,b,c,d,e,f,g){"string"!=typeof b&&(g=f,f=e,e=d,d=c,c=b,b=null),"string"!=typeof e&&(g=f,f=e,e=null),"number"!=typeof f&&(g=f,f=null),this._graph=a,this._name=b||"",this._values=c||[],this._axis=1,this._fill=d||"green",this._stroke=e||"black",this._strokeWidth=f||1,this._settings=g||{}}function o(a,b,c,d,e,f,g){this._graph=a,this._title=b||"",this._titleFormat={},this._titleOffset=0,this._labels=null,this._labelFormat={},this._lineFormat={stroke:"black",strokeWidth:1},this._ticks={major:e||10,minor:f||0,size:10,position:"out"},this._scale={min:c||0,max:d||100,type:g||"linear"},this._crossAt=0}function p(a,b,c){this._graph=a,this._show=!0,this._area=[.9,.1,1,.9],this._sampleSize=15,this._bgSettings=b||{stroke:"gray"},this._textSettings=c||{}}function q(){}function r(){}function s(){}function t(){}function u(){}function v(){}function w(){}function x(){}function y(a){this._wrapper=a,this._drawNow=!1,this._title={value:"",offset:25,settings:{textAnchor:"middle"}},this._area=[.1,.1,.8,.9],this._areaFormat={fill:"none",stroke:"black"},this._gridlines=[],this._equalXY=!1,this._functions=[],this.plotPoints=[],this._onstatus=null,this._uuid=(new Date).getTime(),this._plotCont=this._wrapper.svg(0,0,0,0,{class_:"svg-plot"}),this.xAxis=new B(this),this.xAxis.title("",40),this.yAxis=new B(this),this.yAxis.title("",40),this.legend=new C(this),this._drawNow=!0}function z(a,b,c,d,e,f,h,i){"string"!=typeof b&&(i=h,h=f,f=e,e=d,d=c,c=b,b=null),g(d)||(i=h,h=f,f=e,e=d,d=null),"number"!=typeof e&&(i=h,h=f,f=e,e=null),"string"!=typeof f&&(i=h,h=f,f=null),"number"!=typeof h&&(i=h,h=null),this._plot=a,this._name=b||"",this._fn=c||A,this._range=d,this._points=e||100,this._stroke=f||"black",this._strokeWidth=h||1,this._settings=i||{}}function A(a){return a}function B(a,b,c,d,e,f){this._plot=a,this._title=b||"",this._titleFormat={textAnchor:"middle"},this._titleOffset=0,this._labelFormat={},this._lineFormat={stroke:"black",strokeWidth:1},this._ticks={major:e||10,minor:f||0,size:10,position:"both"},this._scale={min:c||0,max:d||100},this._crossAt=0}function C(a,b,c){this._plot=a,this._show=!0,this._area=[.9,.1,1,.9],this._sampleSize=15,this._bgSettings=b||{stroke:"gray"},this._textSettings=c||{}}var D="svgwrapper";a.extend(c.prototype,{markerClassName:"hasSVG",svgNS:"http://www.w3.org/2000/svg",xlinkNS:"http://www.w3.org/1999/xlink",_wrapperClass:d,_attrNames:{class_:"class",in_:"in",alignmentBaseline:"alignment-baseline",baselineShift:"baseline-shift",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorRendering:"color-rendering",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",underlinePosition:"underline-position",underlineThickness:"underline-thickness",vertAdvY:"vert-adv-y",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode"},_attachSVG:function(b,c){var d=b.namespaceURI===this.svgNS?b:null;if(b=d?null:b,!a(b||d).hasClass(this.markerClassName)){"string"==typeof c?c={loadURL:c}:"function"==typeof c&&(c={onLoad:c}),a(b||d).addClass(this.markerClassName);try{d||(d=document.createElementNS(this.svgNS,"svg"),d.setAttribute("version","1.1"),b.clientWidth>0&&d.setAttribute("width",b.clientWidth),b.clientHeight>0&&d.setAttribute("height",b.clientHeight),b.appendChild(d)),this._afterLoad(b,d,c||{})}catch(e){a.browser.msie?(b.id||(b.id="svg"+this._uuid++),this._settings[b.id]=c,b.innerHTML='<embed type="image/svg+xml" width="100%" height="100%" src="'+(c.initPath||"")+'blank.svg" pluginspage="http://www.adobe.com/svg/viewer/install/main.html"/>'):b.innerHTML='<p class="svg_error">'+this.local.notSupportedText+"</p>"}}},_registerSVG:function(){var b;for(b=0;b<document.embeds.length;b++){var c=document.embeds[b].parentNode;if(a(c).hasClass(a.svg.markerClassName)&&!a.data(c,D)){var d=null;try{d=document.embeds[b].getSVGDocument()}catch(e){return void setTimeout(a.svg._registerSVG,250)}d=d?d.documentElement:null,d&&a.svg._afterLoad(c,d)}}},_afterLoad:function(b,c,d){var d=d||this._settings[b.id];this._settings[b?b.id:""]=null;var e=new this._wrapperClass(c,b);a.data(b||c,D,e);try{d.loadURL&&e.load(d.loadURL,d),d.settings&&e.configure(d.settings),d.onLoad&&!d.loadURL&&d.onLoad.apply(b||c,[e])}catch(f){alert(f)}},_getSVG:function(b){return b="string"==typeof b?a(b)[0]:b.jquery?b[0]:b,a.data(b,D)},_destroySVG:function(b){var c=a(b);c.hasClass(this.markerClassName)&&(c.removeClass(this.markerClassName),b.namespaceURI!==this.svgNS&&c.empty(),a.removeData(b,D))},addExtension:function(a,b){this._extensions.push([a,b])},isSVGElem:function(b){return 1===b.nodeType&&b.namespaceURI===a.svg.svgNS}}),a.extend(d.prototype,{donutslice:function(a){var b=a.center,c=a.inner,d=a.outer,e=a.startAngle,f=a.endAngle,g=a.settings,h=(d-1)/2,i=(c-1)/2,j=Math.PI*e/180,k=Math.PI*f/180,l=parseInt(b+i*Math.cos(j)),m=parseInt(b+i*Math.sin(j)),n=parseInt(b+i*Math.cos(k)),o=parseInt(b+i*Math.sin(k)),p=parseInt(b+h*Math.cos(j)),q=parseInt(b+h*Math.sin(j)),r=parseInt(b+h*Math.cos(k)),s=parseInt(b+h*Math.sin(k));h=parseInt(h),i=parseInt(i);var t="M"+l+","+m+"  L"+p+","+q+"  A"+h+","+h+" 0 0,1 "+r+","+s+" L"+n+","+o+"  A"+i+","+i+" 0 0,0 "+l+","+m;return this.path(t,g)},axis:function(a){var b=a.start,c=a.end,d=a.shift,e=null===a.min?0:a.min,f=null===a.max?100:a.max,g=null===a.showLabels?!0:!1,h=a.labels,i=null===a.labelRotation?0:a.labelRotation,j=null===a.labelFontSize?12:a.labelFontSize,k=null===a.labelFontWeight?100:a.labelFontWeight,l=null===a.labelFontFamily?"Helvetica":a.labelFontFamily,m=null===a.minorTicks?4:a.minorTicks,n=null===a.minorTickLength?5:a.minorTickLength,o=null===a.majorTickLength?10:a.majorTickLenght,p=null===a.minorTickShift?0:a.minorTickShift,q=null===a.majorTickShift?0:a.majorTickShift,r=null===a.majorTicks?10:a.majorTicks,s=(null===a.scale?"linear":a.scale,null===a.direction?"horizontal":a.direction),t=c-b,u=this.group(),v="horizontal"===s?b:d,w="horizontal"===s?d:b,x="horizontal"===s?c:d,y="horizontal"===s?d:c;this.line(u,v,w,x,y,{stroke:"black",strokeWidth:1});var z=b;v="horizontal"===s?z:d+q,w="horizontal"===s?d+q:z,x="horizontal"===s?z:d+q-o,y="horizontal"===s?d+q+o:z;for(var A="horizontal"===s?z:d+p,B="horizontal"===s?d+p:z,C="horizontal"===s?z:d+p-n,D="horizontal"===s?d+p+n:z,E=Math.floor(t/r),F=Math.floor(E/(m+1)),G=0;r>=G;G++){if(this.line(u,v,w,x,y,{stroke:"black",strokeWidth:1}),g){var H=(e+("horizontal"===s?G:r-G)*((f-e)/r)).formatString();h&&h.length&&(H=h[G]);var I=v+("horizontal"===s?0:-1*(o+q)-1),J=w+parseInt(j/("horizontal"===s?1:3))+("horizontal"===s?o+q+1:0);this.text(u,I,J,H,{textAnchor:"horizontal"===s&&null===i?"middle":"end",fontSize:j+"px",stroke:"black",fontWeight:k,fontFamily:l,transform:null===i?"":"rotate(-"+i+","+I+","+J+")"})}if(r!==G)for(var K=0;m>K;K++)"horizontal"===s?(A+=F,C+=F):(B+=F,D+=F),this.line(u,A,B,C,D,{stroke:"black",strokeWidth:1});"horizontal"===s?(v+=E,x+=E):(w+=E,y+=E),"horizontal"===s?(A=v,C=x):(B=w,D=y)}return u},legend:function(a){for(var b=null===a.top?0:a.top,c=null===a.left?0:a.left,d=a.labels,e=a.colors,f=null===a.fontSize?12:a.fontSize,g=null===a.fontWeight?"normal":a.fontWeight,h=null===a.fontFamily?"Helvetica":a.fontFamily,i=null===a.labelSpacing?10:a.labelSpacing,j=this.group(),k=0;k<d.length;k++)this.rect(j,c,b,f,f,{stroke:"white",strokeWidth:0,fill:e[k]}),this.text(j,c+f+f,b+f-2,d[k],{stroke:"black",fontSize:f,fontFamily:h,fontWeight:g}),b+=f+i;return j},_width:function(){return this._container?this._container.clientWidth:this._svg.width},_height:function(){return this._container?this._container.clientHeight:this._svg.height},root:function(){return this._svg},configure:function(b,c,d){if(b.nodeName||(d=c,c=b,b=this._svg),d)for(var e=b.attributes.length-1;e>=0;e--){var f=b.attributes.item(e);"onload"!==f.nodeName&&"version"!==f.nodeName&&"xmlns"!==f.nodeName.substring(0,5)&&b.attributes.removeNamedItem(f.nodeName)}for(var g in c)b.setAttribute(a.svg._attrNames[g]||g,c[g]);return this},getElementById:function(a){return this._svg.ownerDocument.getElementById(a)},change:function(b,c){if(b)for(var d in c)null===c[d]?b.removeAttribute(a.svg._attrNames[d]||d):b.setAttribute(a.svg._attrNames[d]||d,c[d]);return this},_args:function(b,c,d){c.splice(0,0,"parent"),c.splice(c.length,0,"settings");var e={},f=0;b[0]&&b[0].jquery&&(b[0]=b[0][0]),null===b[0]||"object"==typeof b[0]&&b[0].nodeName||(e.parent=null,f=1);for(var g=0;g<b.length;g++)e[c[g+f]]=b[g];return d&&a.each(d,function(a,b){"object"==typeof e[b]&&(e.settings=e[b],e[b]=null)}),e},title:function(a,b,c){var d=this._args(arguments,["text"]),e=this._makeNode(d.parent,"title",d.settings||{});return e.appendChild(this._svg.ownerDocument.createTextNode(d.text)),e},describe:function(a,b,c){var d=this._args(arguments,["text"]),e=this._makeNode(d.parent,"desc",d.settings||{});return e.appendChild(this._svg.ownerDocument.createTextNode(d.text)),e},defs:function(b,c,d){var e=this._args(arguments,["id"],["id"]);return this._makeNode(e.parent,"defs",a.extend(e.id?{id:e.id}:{},e.settings||{}))},symbol:function(b,c,d,e,f,g,h){var i=this._args(arguments,["id","x1","y1","width","height"]);return this._makeNode(i.parent,"symbol",a.extend({id:i.id,viewBox:i.x1+" "+i.y1+" "+i.width+" "+i.height},i.settings||{}))},marker:function(b,c,d,e,f,g,h,i){var j=this._args(arguments,["id","refX","refY","mWidth","mHeight","orient"],["orient"]);return this._makeNode(j.parent,"marker",a.extend({id:j.id,refX:j.refX,refY:j.refY,markerWidth:j.mWidth,markerHeight:j.mHeight,orient:j.orient||"auto"},j.settings||{}))},style:function(b,c,d){var e=this._args(arguments,["styles"]),f=this._makeNode(e.parent,"style",a.extend({type:"text/css"},e.settings||{}));return f.appendChild(this._svg.ownerDocument.createTextNode(e.styles)),a.browser.opera&&a("head").append('<style type="text/css">'+e.styles+"</style>"),f},script:function(b,c,d,e){var f=this._args(arguments,["script","type"],["type"]),g=this._makeNode(f.parent,"script",a.extend({type:f.type||"text/javascript"},f.settings||{}));return g.appendChild(this._svg.ownerDocument.createTextNode(f.script)),a.browser.mozilla||a.globalEval(f.script),g},linearGradient:function(b,c,d,e,f,g,h,i){var j=this._args(arguments,["id","stops","x1","y1","x2","y2"],["x1"]),k=a.extend({id:j.id},null!==j.x1?{x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2}:{});return this._gradient(j.parent,"linearGradient",a.extend(k,j.settings||{}),j.stops)},radialGradient:function(b,c,d,e,f,g,h,i,j){var k=this._args(arguments,["id","stops","cx","cy","r","fx","fy"],["cx"]),l=a.extend({id:k.id},null!==k.cx?{cx:k.cx,cy:k.cy,r:k.r,fx:k.fx,fy:k.fy}:{});return this._gradient(k.parent,"radialGradient",a.extend(l,k.settings||{}),k.stops)},_gradient:function(b,c,d,e){for(var f=this._makeNode(b,c,d),g=0;g<e.length;g++){var h=e[g];this._makeNode(f,"stop",a.extend({offset:h[0],stopColor:h[1]},null!==h[2]?{stopOpacity:h[2]}:{}))}return f},pattern:function(b,c,d,e,f,g,h,i,j,k,l){var m=this._args(arguments,["id","x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),n=a.extend({id:m.id,x:m.x,y:m.y,width:m.width,height:m.height},null!==m.vx?{viewBox:m.vx+" "+m.vy+" "+m.vwidth+" "+m.vheight}:{});return this._makeNode(m.parent,"pattern",a.extend(n,m.settings||{}))},clipPath:function(b,c,d,e){var f=this._args(arguments,["id","units"]);return f.units=f.units||"userSpaceOnUse",this._makeNode(f.parent,"clipPath",a.extend({id:f.id,clipPathUnits:f.units},f.settings||{}))},mask:function(b,c,d,e,f,g,h){var i=this._args(arguments,["id","x","y","width","height"]);return this._makeNode(i.parent,"mask",a.extend({id:i.id,x:i.x,y:i.y,width:i.width,height:i.height},i.settings||{}))},createPath:function(){return new e},createText:function(){return new f},svg:function(b,c,d,e,f,g,h,i,j,k){var l=this._args(arguments,["x","y","width","height","vx","vy","vwidth","vheight"],["vx"]),m=a.extend({x:l.x,y:l.y,width:l.width,height:l.height},null!==l.vx?{viewBox:l.vx+" "+l.vy+" "+l.vwidth+" "+l.vheight}:{});return this._makeNode(l.parent,"svg",a.extend(m,l.settings||{}))},group:function(b,c,d){var e=this._args(arguments,["id"],["id"]);return this._makeNode(e.parent,"g",a.extend({id:e.id},e.settings||{}))},use:function(b,c,d,e,f,g,h){var i=this._args(arguments,["x","y","width","height","ref"]);"string"==typeof i.x&&(i.ref=i.x,i.settings=i.y,i.x=i.y=i.width=i.height=null);var j=this._makeNode(i.parent,"use",a.extend({x:i.x,y:i.y,width:i.width,height:i.height},i.settings||{}));return j.setAttributeNS(a.svg.xlinkNS,"href",i.ref),j},link:function(b,c,d){var e=this._args(arguments,["ref"]),f=this._makeNode(e.parent,"a",e.settings);return f.setAttributeNS(a.svg.xlinkNS,"href",e.ref),f},image:function(b,c,d,e,f,g,h){var i=this._args(arguments,["x","y","width","height","ref"]),j=this._makeNode(i.parent,"image",a.extend({x:i.x,y:i.y,width:i.width,height:i.height},i.settings||{}));return j.setAttributeNS(a.svg.xlinkNS,"href",i.ref),j},path:function(b,c,d){var e=this._args(arguments,["path"]);return this._makeNode(e.parent,"path",a.extend({d:e.path.path?e.path.path():e.path},e.settings||{}))},rect:function(b,c,d,e,f,g,h,i){var j=this._args(arguments,["x","y","width","height","rx","ry"],["rx"]);return this._makeNode(j.parent,"rect",a.extend({x:j.x,y:j.y,width:j.width,height:j.height},j.rx?{rx:j.rx,ry:j.ry}:{},j.settings||{}))},circle:function(b,c,d,e,f){var g=this._args(arguments,["cx","cy","r"]);return this._makeNode(g.parent,"circle",a.extend({cx:g.cx,cy:g.cy,r:g.r},g.settings||{}))},ellipse:function(b,c,d,e,f,g){var h=this._args(arguments,["cx","cy","rx","ry"]);return this._makeNode(h.parent,"ellipse",a.extend({cx:h.cx,cy:h.cy,rx:h.rx,ry:h.ry},h.settings||{}))},line:function(b,c,d,e,f,g){var h=this._args(arguments,["x1","y1","x2","y2"]);return this._makeNode(h.parent,"line",a.extend({x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2},h.settings||{}))},polyline:function(a,b,c){var d=this._args(arguments,["points"]);return this._poly(d.parent,"polyline",d.points,d.settings)},polygon:function(a,b,c){var d=this._args(arguments,["points"]);return this._poly(d.parent,"polygon",d.points,d.settings)},_poly:function(b,c,d,e){for(var f="",g=0;g<d.length;g++)f+=d[g].join()+" ";return this._makeNode(b,c,a.extend({points:a.trim(f)},e||{}))},text:function(b,c,d,e,f){var h=this._args(arguments,["x","y","value"]);return"string"==typeof h.x&&arguments.length<4&&(h.value=h.x,h.settings=h.y,h.x=h.y=null),this._text(h.parent,"text",h.value,a.extend({x:h.x&&g(h.x)?h.x.join(" "):h.x,y:h.y&&g(h.y)?h.y.join(" "):h.y},h.settings||{}))},textpath:function(b,c,d,e){var f=this._args(arguments,["path","value"]),g=this._text(f.parent,"textPath",f.value,f.settings||{});return g.setAttributeNS(a.svg.xlinkNS,"href",f.path),g},_text:function(b,c,d,e){var f=this._makeNode(b,c,e);if("number"==typeof d&&(d=d.toString()),"string"==typeof d)f.appendChild(f.ownerDocument.createTextNode(d));else for(var g=0;g<d._parts.length;g++){var h=d._parts[g];if("tspan"===h[0]){var i=this._makeNode(f,h[0],h[2]);i.appendChild(f.ownerDocument.createTextNode(h[1])),f.appendChild(i)}else if("tref"===h[0]){var i=this._makeNode(f,h[0],h[2]);i.setAttributeNS(a.svg.xlinkNS,"href",h[1]),f.appendChild(i)}else if("textpath"===h[0]){var j=a.extend({},h[2]);j.href=null;var i=this._makeNode(f,h[0],j);i.setAttributeNS(a.svg.xlinkNS,"href",h[2].href),i.appendChild(f.ownerDocument.createTextNode(h[1])),f.appendChild(i)}else f.appendChild(f.ownerDocument.createTextNode(h[1]))}return f},other:function(a,b,c){var d=this._args(arguments,["name"]);return this._makeNode(d.parent,d.name,d.settings||{})},_makeNode:function(b,c,d){b=b||this._svg;var e=this._svg.ownerDocument.createElementNS(a.svg.svgNS,c);for(var c in d){var f=d[c];null===f||null===f||"string"==typeof f&&""===f||e.setAttribute(a.svg._attrNames[c]||c,f)}return b.appendChild(e),e},add:function(b,c){var d=this._args(1===arguments.length?[null,b]:arguments,["node"]),e=this;d.parent=d.parent||this._svg,d.node=d.node.jquery?d.node:a(d.node);try{if(a.svg._renesis)throw"Force traversal";d.parent.appendChild(d.node.cloneNode(!0))}catch(f){d.node.each(function(){var a=e._cloneAsSVG(this);a&&d.parent.appendChild(a)})}return this},clone:function(b,c){var d=this,e=this._args(1===arguments.length?[null,b]:arguments,["node"]);e.parent=e.parent||this._svg,e.node=e.node.jquery?e.node:a(e.node);var f=[];return e.node.each(function(){var a=d._cloneAsSVG(this);a&&(a.id="",e.parent.appendChild(a),f.push(a))}),f},_cloneAsSVG:function(b){var c=null;if(1===b.nodeType){c=this._svg.ownerDocument.createElementNS(a.svg.svgNS,this._checkName(b.nodeName));for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);"xmlns"!==e.nodeName&&e.nodeValue&&("xlink"===e.prefix?c.setAttributeNS(a.svg.xlinkNS,e.localName||e.baseName,e.nodeValue):c.setAttribute(this._checkName(e.nodeName),e.nodeValue))}for(var d=0;d<b.childNodes.length;d++){var f=this._cloneAsSVG(b.childNodes[d]);f&&c.appendChild(f)}}else if(3===b.nodeType)a.trim(b.nodeValue)&&(c=this._svg.ownerDocument.createTextNode(b.nodeValue));else if(4===b.nodeType&&a.trim(b.nodeValue))try{c=this._svg.ownerDocument.createCDATASection(b.nodeValue)}catch(g){c=this._svg.ownerDocument.createTextNode(b.nodeValue.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}return c},_checkName:function(a){return a=a.substring(0,1)>="A"&&a.substring(0,1)<="Z"?a.toLowerCase():a,"svg:"===a.substring(0,4)?a.substring(4):a},load:function(b,c){c="boolean"==typeof c?{addTo:c}:"function"==typeof c?{onLoad:c}:"string"==typeof c?{parent:c}:"object"==typeof c&&c.nodeName?{parent:c}:"object"==typeof c&&c.jquery?{parent:c}:c||{},c.parent||c.addTo||this.clear(!1);var d=[this._svg.getAttribute("width"),this._svg.getAttribute("height")],e=this,f=function(b){b=a.svg.local.errorLoadingText+": "+b,c.onLoad?c.onLoad.apply(e._container||e._svg,[e,b]):e.text(null,10,20,b)},g=function(a){var b=new ActiveXObject("Microsoft.XMLDOM");return b.validateOnParse=!1,b.resolveExternals=!1,b.async=!1,b.loadXML(a),0!==b.parseError.errorCode?(f(b.parseError.reason),null):b},h=function(b){if(b){if("svg"!==b.documentElement.nodeName){var g=b.getElementsByTagName("parsererror"),h=g.length?g[0].getElementsByTagName("div"):[];return void f(g.length?(h.length?h[0]:g[0]).firstChild.nodeValue:"???")}for(var i=c.parent?a(c.parent)[0]:e._svg,j={},k=0;k<b.documentElement.attributes.length;k++){var l=b.documentElement.attributes.item(k);"version"!==l.nodeName&&"xmlns"!==l.nodeName.substring(0,5)&&(j[l.nodeName]=l.nodeValue)}e.configure(i,j,!c.parent);for(var m=b.documentElement.childNodes,k=0;k<m.length;k++)try{if(a.svg._renesis)throw"Force traversal";i.appendChild(e._svg.ownerDocument.importNode(m[k],!0)),"script"===m[k].nodeName&&a.globalEval(m[k].textContent)}catch(n){e.add(i,m[k])}c.changeSize||e.configure(i,{width:d[0],height:d[1]}),c.onLoad&&c.onLoad.apply(e._container||e._svg,[e])}};return b.match("<svg")?h(a.browser.msie?g(b):(new DOMParser).parseFromString(b,"text/xml")):a.ajax({url:b,dataType:a.browser.msie?"text":"xml",success:function(b){h(a.browser.msie?g(b):b)},error:function(a,b,c){f(b+(c?" "+c.message:""))}}),this},remove:function(a){return a=a.jquery?a[0]:a,a.parentNode.removeChild(a),this},clear:function(a){for(a&&this.configure({},!0);this._svg.firstChild;)this._svg.removeChild(this._svg.firstChild);return this},toSVG:function(a){return a=a||this._svg,"undefined"==typeof XMLSerializer?this._toSVG(a):(new XMLSerializer).serializeToString(a)},_toSVG:function(b){var c="";if(!b)return c;if(3===b.nodeType)c=b.nodeValue;else if(4===b.nodeType)c="<![CDATA["+b.nodeValue+"]]>";else{if(c="<"+b.nodeName,b.attributes)for(var d=0;d<b.attributes.length;d++){var e=b.attributes.item(d);""===a.trim(e.nodeValue)||e.nodeValue.match(/^\[object/)||e.nodeValue.match(/^function/)||(c+=" "+(e.namespaceURI===a.svg.xlinkNS?"xlink:":"")+e.nodeName+'="'+e.nodeValue+'"')}if(b.firstChild){c+=">";for(var f=b.firstChild;f;)c+=this._toSVG(f),f=f.nextSibling;c+="</"+b.nodeName+">"}else c+="/>"}return c}}),a.extend(e.prototype,{reset:function(){return this._path="",this},move:function(a,b,c){return c=g(a)?b:c,this._coords(c?"m":"M",a,b)},line:function(a,b,c){return c=g(a)?b:c,this._coords(c?"l":"L",a,b)},horiz:function(a,b){return this._path+=(b?"h":"H")+(g(a)?a.join(" "):a),this},vert:function(a,b){return this._path+=(b?"v":"V")+(g(a)?a.join(" "):a),this},curveC:function(a,b,c,d,e,f,h){return h=g(a)?b:h,this._coords(h?"c":"C",a,b,c,d,e,f)},smoothC:function(a,b,c,d,e){return e=g(a)?b:e,this._coords(e?"s":"S",a,b,c,d)},curveQ:function(a,b,c,d,e){return e=g(a)?b:e,this._coords(e?"q":"Q",a,b,c,d)},smoothQ:function(a,b,c){return c=g(a)?b:c,this._coords(c?"t":"T",a,b)},_coords:function(a,b,c,d,e,f,h){if(g(b))for(var i=0;i<b.length;i++){var j=b[i];this._path+=(0===i?a:" ")+j[0]+","+j[1]+(j.length<4?"":" "+j[2]+","+j[3]+(j.length<6?"":" "+j[4]+","+j[5]))}else this._path+=a+b+","+c+(null===d?"":" "+d+","+e+(null===f?"":" "+f+","+h));return this},arc:function(a,b,c,d,e,f,h,i){if(i=g(a)?b:i,this._path+=i?"a":"A",g(a))for(var j=0;j<a.length;j++){var k=a[j];this._path+=(0===j?"":" ")+k[0]+","+k[1]+" "+k[2]+" "+(k[3]?"1":"0")+","+(k[4]?"1":"0")+" "+k[5]+","+k[6]}else this._path+=a+","+b+" "+c+" "+(d?"1":"0")+","+(e?"1":"0")+" "+f+","+h;return this},close:function(){return this._path+="z",this},path:function(){return this._path}}),e.prototype.moveTo=e.prototype.move,e.prototype.lineTo=e.prototype.line,e.prototype.horizTo=e.prototype.horiz,e.prototype.vertTo=e.prototype.vert,e.prototype.curveCTo=e.prototype.curveC,e.prototype.smoothCTo=e.prototype.smoothC,e.prototype.curveQTo=e.prototype.curveQ,e.prototype.smoothQTo=e.prototype.smoothQ,e.prototype.arcTo=e.prototype.arc,a.extend(f.prototype,{reset:function(){return this._parts=[],this},string:function(a){return this._parts[this._parts.length]=["text",a],this},span:function(a,b){return this._parts[this._parts.length]=["tspan",a,b],this},ref:function(a,b){return this._parts[this._parts.length]=["tref",a,b],this},path:function(b,c,d){return this._parts[this._parts.length]=["textpath",c,a.extend({href:b},d||{})],this}}),a.fn.svg=function(b){var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&"get"===b?a.svg["_"+b+"SVG"].apply(a.svg,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.svg["_"+b+"SVG"].apply(a.svg,[this].concat(c)):a.svg._attachSVG(this,b||{})})},a.svg=new c,a.svg.addExtension("graph",m),a.svg.graphing=new l,a.extend(l.prototype,{_chartTypes:[],addChartType:function(a,b){this._chartTypes[a]=b},chartTypes:function(){return this._chartTypes}}),a.extend(m.prototype,{X:0,Y:1,W:2,H:3,L:0,T:1,R:2,B:3,_percentageAxis:new o(this,a.svg.graphing.region.percentageText,0,100,10,0),container:function(a){return 0===arguments.length?this._chartCont:(this._chartCont=a,this)},chartType:function(a,b){return 0===arguments.length?this.type():this.type(a,b)},type:function(b,c){if(0===arguments.length)return this._chartType;var d=a.svg.graphing._chartTypes[b];return d&&(this._chartType=d,this._chartOptions=a.extend({},c||{})),this._drawGraph(),this},chartOptions:function(a){return 0===arguments.length?this.options():this.options(a)},options:function(b){return 0===arguments.length?this._chartOptions:(this._chartOptions=a.extend({},b),this._drawGraph(),this)},chartFormat:function(a,b,c){return 0===arguments.length?this.format():this.format(a,b,c)},format:function(b,c,d){return 0===arguments.length?this._chartFormat:("object"==typeof c&&(d=c,c=null),this._chartFormat=a.extend({fill:b},c?{stroke:c}:{},d||{}),this._drawGraph(),this)},chartArea:function(a,b,c,d){return 0===arguments.length?this.area():this.area(a,b,c,d)},area:function(a,b,c,d){return 0===arguments.length?this._area:(this._area=g(a)?a:[a,b,c,d],this._drawGraph(),this)},gridlines:function(a,b){return 0===arguments.length?this._gridlines:(this._gridlines=["string"==typeof a?{stroke:a}:a,"string"==typeof b?{stroke:b}:b],null===this._gridlines[0]&&null===this._gridlines[1]&&(this._gridlines=[]),this._drawGraph(),this)},title:function(b,c,d,e){return 0===arguments.length?this._title:("number"!=typeof c&&(e=d,d=c,c=null),"string"!=typeof d&&(e=d,d=null),this._title={value:b,offset:c||this._title.offset,settings:a.extend({textAnchor:"middle"},d?{fill:d}:{},e||{})},this._drawGraph(),this)},addSeries:function(a,b,c,d,e,f){return this._series.push(new n(this,a,b,c,d,e,f)),this._drawGraph(),this},series:function(a){return(arguments.length>0?this._series[a]:null)||this._series},noDraw:function(){return this._drawNow=!1,this},redraw:function(){return this._drawNow=!0,this._drawGraph(),this},status:function(a){return this._onstatus=a,this},_drawGraph:function(){if(this._drawNow){for(;this._chartCont.firstChild;)this._chartCont.removeChild(this._chartCont.firstChild);this._chartCont.parent||this._wrapper._svg.appendChild(this._chartCont),this._chartCont.width?this._chartCont.width.baseVal?this._chartCont.width.baseVal.value=this._chartCont.width.baseVal.value||this._wrapper._width():this._chartCont.width=this._chartCont.width||this._wrapper._width():this._chartCont.setAttribute("width",parseInt(this._chartCont.getAttribute("width"),10)||this._wrapper._width()),this._chartCont.height?this._chartCont.height.baseVal?this._chartCont.height.baseVal.value=this._chartCont.height.baseVal.value||this._wrapper._height():this._chartCont.height=this._chartCont.height||this._wrapper._height():this._chartCont.setAttribute("height",parseInt(this._chartCont.getAttribute("height"),10)||this._wrapper._height()),this._chartType.drawGraph(this)}},_getValue:function(a,b){return a[b]?a[b].baseVal?a[b].baseVal.value:a[b]:parseInt(a.getAttribute(b),10)},_drawTitle:function(){this._wrapper.text(this._chartCont,this._getValue(this._chartCont,"width")/2,this._title.offset,this._title.value,this._title.settings)},_getDims:function(a){a=a||this._area;var b=this._getValue(this._chartCont,"width"),c=this._getValue(this._chartCont,"height"),d=a[this.L]>1?a[this.L]:b*a[this.L],e=a[this.T]>1?a[this.T]:c*a[this.T],f=(a[this.R]>1?a[this.R]:b*a[this.R])-d,g=(a[this.B]>1?a[this.B]:c*a[this.B])-e;return[d,e,f,g]},_drawChartBackground:function(a,b){var c=this._wrapper.group(this._chartCont,{class_:"background"}),d=this._getDims();return this._wrapper.rect(c,d[this.X],d[this.Y],d[this.W],d[this.H],this._chartFormat),this._gridlines[0]&&this.yAxis._ticks.major&&!b&&this._drawGridlines(c,this.yAxis,!0,d,this._gridlines[0]),this._gridlines[1]&&this.xAxis._ticks.major&&!a&&this._drawGridlines(c,this.xAxis,!1,d,this._gridlines[1]),c},_drawGridlines:function(a,b,c,d,e){var f=this._wrapper.group(a,e),g=(c?d[this.H]:d[this.W])/(b._scale.max-b._scale.min),h=Math.floor(b._scale.min/b._ticks.major)*b._ticks.major;for(h=h<b._scale.min?h+b._ticks.major:h;h<=b._scale.max;){var i=(c?b._scale.max-h:h-b._scale.min)*g+(c?d[this.Y]:d[this.X]);this._wrapper.line(f,c?d[this.X]:i,c?i:d[this.Y],c?d[this.X]+d[this.W]:i,c?i:d[this.Y]+d[this.H]),h+=b._ticks.major}},_drawAxes:function(b){var c=this._getDims();if(this.xAxis&&!b&&(this.xAxis._title&&this._wrapper.text(this._chartCont,c[this.X]+c[this.W]/2,c[this.Y]+c[this.H]+this.xAxis._titleOffset,this.xAxis._title,this.xAxis._titleFormat),this._drawAxis(this.xAxis,"xAxis",c[this.X],c[this.Y]+c[this.H],c[this.X]+c[this.W],c[this.Y]+c[this.H])),this.yAxis&&(this.yAxis._title&&(this.yAxis._titleOffset=c[this.X]-(this.yAxis._titleFontSize||14),this._wrapper.text(this._chartCont,0,0,this.yAxis._title,a.extend({textAnchor:"middle",transform:"translate("+(c[this.X]-this.yAxis._titleOffset)+","+(c[this.Y]+c[this.H]/2)+") rotate(-90)"},this.yAxis._titleFormat||{}))),this._drawAxis(this.yAxis,"yAxis",c[this.X],c[this.Y],c[this.X],c[this.Y]+c[this.H])),this.x2Axis&&!b&&(this.x2Axis._title&&this._wrapper.text(this._chartCont,c[this.X]+c[this.W]/2,c[this.X]-this.x2Axis._titleOffset,this.x2Axis._title,this.x2Axis._titleFormat),this._drawAxis(this.x2Axis,"x2Axis",c[this.X],c[this.Y],c[this.X]+c[this.W],c[this.Y])),this.y2Axis){if(this.y2Axis._title){var d=this._getValue(this._chartCont,"width")-10;this._wrapper.text(this._chartCont,0,0,this.y2Axis._title,a.extend({textAnchor:"middle",transform:"translate("+d+","+(c[this.Y]+c[this.H]/2)+") rotate(90)"},this.y2Axis._titleFormat||{}))}this._drawAxis(this.y2Axis,"y2Axis",c[this.X]+c[this.W],c[this.Y],c[this.X]+c[this.W],c[this.Y]+c[this.H])}},_drawAxis:function(b,c,d,e,f,g){var h=e===g,i=this._wrapper.group(this._chartCont,a.extend({class_:c},b._lineFormat)),j=this._wrapper.group(this._chartCont,a.extend({class_:c+"Labels",textAnchor:h?"middle":"y2Axis"===c?"left":"end"},b._labelFormat));if(this._wrapper.line(i,d,e,f,g),b._ticks.major){var k=f>this._getValue(this._chartCont,"width")/2&&g>this._getValue(this._chartCont,"height")/2,l=(h?f-d:g-e)/(b._scale.max-b._scale.min),m=b._ticks.size,n=Math.floor(b._scale.min/b._ticks.major)*b._ticks.major;n=n<b._scale.min?n+b._ticks.major:n;var o=b._ticks.minor?Math.floor(b._scale.min/b._ticks.minor)*b._ticks.minor:b._scale.max+1;o=o<b._scale.min?o+b._ticks.minor:o;for(var p=this._getTickOffsets(b,k),q=0;n<=b._scale.max||o<=b._scale.max;){var r=Math.min(n,o),s=r===n?m:m/2,t=(h?d:e)+(h?r-b._scale.min:b._scale.max-r)*l;if(r===n){var u=r.toString(),v=b._ticks.major.toString();if(v.substr(v.indexOf(".")+1).length>3&&(v=v.substr(0,v.indexOf(".")+4)),parseFloat(v)<.001)return;u.substr(u.indexOf(".")+1).length>v.substr(v.indexOf(".")+1).length&&(u=parseFloat(n.toFixed(v.substr(v.indexOf(".")+1).length))),this._wrapper.line(i,h?t:d+s*p[0],h?e+s*p[0]:t,h?t:d+s*p[1],h?e+s*p[1]:t);var w=u;this.shortAxisLabels&&(w=Math.floor(w)+"",
w.length>12?(w=r/1e12,w=w.formatString(1)+" T"):w.length>9?(w=r/1e9,w=w.formatString(1)+" G"):w.length>6?(w=r/1e6,w=w.formatString(1)+" M"):w.length>3&&(w=r/1e3,w=w.formatString(1)+" K"));var x=this._wrapper.createText().string("10").span(r,{dy:-10,fontSize:10});this._wrapper.text(j,h?t:"y2Axis"===c?d+m+5:d-m-5,h?e+2*m:t+5,b._labels?b._labels[q++]:"log"===b._scale.type?x:w)}"log"===b._scale.type?(n+=r===n?1:0,o+=r===o?1:0):(n+=r===n?b._ticks.major:0,o+=r===o?b._ticks.minor:0)}}},_getTickOffsets:function(a,b){return[a._ticks.position===(b?"in":"out")||"both"===a._ticks.position?-1:0,a._ticks.position===(b?"out":"in")||"both"===a._ticks.position?1:0]},_getPercentageAxis:function(){return this._percentageAxis._title=a.svg.graphing.region.percentageText,this._percentageAxis},_getTotals:function(){for(var a=[],b=this._series.length?this._series[0]._values.length:0,c=0;b>c;c++){a[c]=0;for(var d=0;d<this._series.length;d++)a[c]+=this._series[d]._values[c]}return a},_drawLegend:function(){if(this.legend._show){var a=this._wrapper.group(this._chartCont,{class_:"legend"}),b=this._getDims(this.legend._area);this._wrapper.rect(a,b[this.X],b[this.Y],b[this.W],b[this.H],this.legend._bgSettings);for(var c=!1,d=this._series.length,e=(c?b[this.W]:b[this.H])/d,f=b[this.X]+5,g=b[this.Y]+((c?b[this.H]:e)+this.legend._sampleSize)/2,h=0;d>h;h++){var i=this._series[h];this._wrapper.rect(a,f+(c?h*e:0),g+(c?0:h*e)-this.legend._sampleSize,this.legend._sampleSize,this.legend._sampleSize,{fill:i._fill,stroke:i._stroke,strokeWidth:1}),this._wrapper.text(a,f+(c?h*e:0)+this.legend._sampleSize+5,g+(c?0:h*e),i._name,this.legend._textSettings)}}},_showStatus:function(b,c,d){var e=this._onstatus;this._onstatus&&(a(b).hover(function(a){e.apply(this,[c,d,"mouseover",a])},function(a){e.apply(this,["",0,"mouseout",a])}),a(b).click(function(a){e.apply(this,[c,d,"click",a])}))}}),a.extend(n.prototype,{name:function(a){return 0===arguments.length?this._name:(this._name=a,this._graph._drawGraph(),this)},values:function(a,b){return 0===arguments.length?this._values:(g(a)&&(b=a,a=null),this._name=a||this._name,this._values=b,this._graph._drawGraph(),this)},format:function(b,c,d,e){return 0===arguments.length?a.extend({fill:this._fill,stroke:this._stroke,strokeWidth:this._strokeWidth},this._settings):("string"!=typeof c&&(e=d,d=c,c=null),"number"!=typeof d&&(e=d,d=null),this._fill=b||this._fill,this._stroke=c||this._stroke,this._strokeWidth=d||this._strokeWidth,a.extend(this._settings,e||{}),this._graph._drawGraph(),this)},end:function(){return this._graph}}),a.extend(o.prototype,{scale:function(a,b,c){return 0===arguments.length?this._scale:(this._scale.min="log"===c&&0!==a?j(a):a,this._scale.max="log"===c&&0!==b?j(b):b,this._scale.type=c||"linear",this._graph._drawGraph(),this)},ticks:function(a,b,c,d,e){return 0===arguments.length?this._ticks:("string"==typeof c&&(d=c,c=null),this._ticks.major="log"===e&&0!==a?2:a,this._ticks.minor="log"===e&&0!==b?1:b,this._ticks.size=c||this._ticks.size,this._ticks.position=d||this._ticks.position,this._graph._drawGraph(),this)},title:function(b,c,d,e){return 0===arguments.length?{title:this._title,offset:this._titleOffset,format:this._titleFormat}:("number"!=typeof c&&(e=d,d=c,c=null),"string"!=typeof d&&(e=d,d=null),this._title=b,this._titleOffset=null!==c?c:this._titleOffset,(d||e)&&(this._titleFormat=a.extend(e||{},d?{fill:d}:{})),this._graph._drawGraph(),this)},labels:function(b,c,d){return 0===arguments.length?{labels:this._labels,format:this._labelFormat}:("string"!=typeof c&&(d=c,c=null),this._labels=b,(c||d)&&(this._labelFormat=a.extend(d||{},c?{fill:c}:{})),this._graph._drawGraph(),this)},line:function(b,c,d){return 0===arguments.length?this._lineFormat:("object"==typeof c&&(d=c,c=null),a.extend(this._lineFormat,{stroke:b},c?{strokeWidth:c}:{},d||{}),this._graph._drawGraph(),this)},end:function(){return this._graph}}),a.extend(p.prototype,{show:function(a){return 0===arguments.length?this._show:(this._show=a,this._graph._drawGraph(),this)},area:function(a,b,c,d){return 0===arguments.length?this._area:(this._area=g(a)?a:[a,b,c,d],this._graph._drawGraph(),this)},settings:function(a,b,c){return 0===arguments.length?{sampleSize:this._sampleSize,bgSettings:this._bgSettings,textSettings:this._textSettings}:("number"!=typeof a&&(c=b,b=a,a=null),this._sampleSize=a||this._sampleSize,this._bgSettings=b,this._textSettings=c||this._textSettings,this._graph._drawGraph(),this)},end:function(){return this._graph}});var E=["barWidth (number) - the width of each bar","barGap (number) - the gap between sets of bars"];a.extend(q.prototype,{title:function(){return"deviation chart"},description:function(){return"Compare sets of values as vertical bars with deviations in grouped categories."},options:function(){return E},drawGraph:function(a){a._drawChartBackground(!0);var b=a._chartOptions.barWidth||20,c=a._chartOptions.barGap||10,d=a._series.length,e=d?a._series[0]._values.length:0,f=a._getDims(),g=f[a.W]/((d*b+c)*e+c),h=f[a.H]/(a.yAxis._scale.max-a.yAxis._scale.min);this._chart=a._wrapper.group(a._chartCont,{class_:"chart"});for(var i=0;d>i;i++)this._drawSeries(a,i,d,b,c,f,g,h);a._drawTitle(),a._drawAxes(!0),this._drawXAxis(a,d,e,b,c,f,g),a._drawLegend()},_drawSeries:function(b,c,d,e,f,g,h,i,k){var l,m=b._series[c];l="object"==typeof m._fill?b._wrapper.group(this._chart,a.extend({class_:"series"+c,stroke:m._stroke,strokeWidth:m._strokeWidth},m._settings||{})):b._wrapper.group(this._chart,a.extend({class_:"series"+c,fill:m._fill,stroke:m._stroke,strokeWidth:m._strokeWidth},m._settings||{}));for(var n=0;n<m._values.length;n++){var o=g[b.X]+h*(f+n*(d*e+f)+c*e),p=m._values[n];"log"===b.yAxis._scale.type&&(p.upper=j(p.upper),p.median=j(p.median),p.max=j(p.max),p.lower=j(p.lower),p.min=j(p.min));var q=g[b.Y];b._wrapper.rect(l,o+1,Math.ceil((b.yAxis._scale.max-p.upper)*i+q),parseInt(e-2),parseInt((p.upper-p.median)*i),0,0,{stroke:"black",strokeWidth:1,fill:m._fill[n]}),b._wrapper.rect(l,o+1,parseInt((b.yAxis._scale.max-p.median)*i+q),parseInt(e-2),parseInt((p.median-p.lower)*i),0,0,{stroke:"black",strokeWidth:1,fill:m._fill[n]});b._wrapper.line(l,o+1+parseInt(e/6),parseInt((b.yAxis._scale.max-p.max)*i+1+q),parseInt(o+1+e-2-parseInt(e/6)),parseInt((b.yAxis._scale.max-p.max)*i+1+q),{stroke:"black",strokeWidth:1});b._wrapper.line(l,o+parseInt(e/2),parseInt((b.yAxis._scale.max-p.max)*i+1+q),parseInt(o+parseInt(e/2)),parseInt((b.yAxis._scale.max-p.upper)*i+1+q),{stroke:"black",strokeWidth:1,strokeDashArray:"2,2"}),b._wrapper.line(l,o+1+parseInt(e/6),parseInt((b.yAxis._scale.max-p.min)*i-1+q),parseInt(o+1+e-2-parseInt(e/6)),parseInt((b.yAxis._scale.max-p.min)*i-1+q),{stroke:"black",strokeWidth:1}),b._wrapper.line(l,o+parseInt(e/2),parseInt((b.yAxis._scale.max-p.lower)*i-1+q),parseInt(o+parseInt(e/2)),parseInt((b.yAxis._scale.max-p.min)*i-1+q),{stroke:"black",strokeWidth:1,strokeDashArray:"2,2"})}},_drawXAxis:function(b,c,d,e,f,g,h){var i=b.xAxis;i._title&&b._wrapper.text(b._chartCont,g[b.X]+g[b.W]/2,parseInt(b._chartCont.attributes[3].value),i._title,a.extend({textAnchor:"middle"},i._titleFormat||{}));var j=b._wrapper.group(b._chartCont,a.extend({class_:"xAxis"},i._lineFormat)),k=i.labelRotation?"end":"middle",l=b._wrapper.group(b._chartCont,a.extend({class_:"xAxisLabels",textAnchor:k},i._labelFormat));if(b._wrapper.line(j,g[b.X],g[b.Y]+g[b.H],g[b.X]+g[b.W],g[b.Y]+g[b.H]),i._ticks.major){for(var m=b._getTickOffsets(i,!0),n=0;c>n;n++){var o=g[b.X]+h*f+e/2+n*(e*h);b._wrapper.line(j,o,g[b.Y]+g[b.H]+m[0]*i._ticks.size,o,g[b.Y]+g[b.H]+m[1]*i._ticks.size)}for(var n=0;c>n;n++){var o=g[b.X]+h*f+e/2+n*(e*h);b._wrapper.text(l,o,g[b.Y]+g[b.H]+2*i._ticks.size,i._labels?i._labels[n]:b._series[n]._name,i.labelRotation?{textAnchor:"end",transform:"rotate("+i.labelRotation+", "+o+", "+(g[b.Y]+g[b.H]+2*i._ticks.size)+")"}:{textAnchor:"end",transform:"rotate(-50, "+o+", "+(g[b.Y]+g[b.H]+2*i._ticks.size)+")"})}}}}),a.extend(r.prototype,{title:function(){return"Basic column chart"},description:function(){return"Compare sets of values as vertical bars with grouped categories."},options:function(){return E},drawGraph:function(a){a._drawChartBackground(!0);for(var b=a._chartOptions.barWidth||10,c=a._chartOptions.barGap||10,d=a._series.length,e=0,f=0;d>f;f++)a._series[f]._settings.hasOwnProperty("seriesType")&&"line"===a._series[f]._settings.seriesType||e++;var g=d?a._series[0]._values.length:0,h=a._getDims(),i=h[a.W]/((e*b+c)*g+c),j=h[a.H]/(a.yAxis._scale.max-a.yAxis._scale.min),k=a.y2Axis?h[a.H]/(a.y2Axis._scale.max-a.y2Axis._scale.min):0;this._chart=a._wrapper.group(a._chartCont,{class_:"chart"});for(var l=0,f=0;d>f;f++)a._series[f]._settings.isY2?this._drawSeries(a,l,e,b,c,h,i,k):this._drawSeries(a,l,e,b,c,h,i,j),a._series[f]._settings.hasOwnProperty("seriesType")&&"line"===a._series[f]._settings.seriesType||l++;a._drawTitle(),a._drawAxes(!0),this._drawXAxis(a,l,g,b,c,h,i),a._drawLegend()},_drawSeries:function(b,c,d,e,f,g,h,i,k){var l=b._series[c];if(l._settings.hasOwnProperty("seriesType")&&"line"===l._settings.seriesType){for(var m=b._wrapper.createPath(),n=[],o=0;o<l._values.length;o++){var p=g[b.X]+h*(f/2+(o+.5)*(d*e+f)),q=g[b.Y]+((l._settings.isY2?b.y2Axis._scale.max:b.yAxis._scale.max)-l._values[o])*i;0===o?m.move(p,q):m.line(p,q),n.push([p,q])}for(l._settings.noLines||b._wrapper.path(this._chart,m,a.extend({id:"series"+c,fill:"none",stroke:"white"===l._stroke?"black":l._stroke,strokeWidth:l._strokeWidth},l._settings||{})),o=0;o<n.length;o++){var r=b._wrapper.circle(this._chart,n[o][0],n[o][1],3,{fill:"white",strokeWidth:1,stroke:"white"===l._stroke?"black":l._stroke,onmouseover:"this.setAttribute('r', parseInt(this.getAttribute('r')) + 1)",onmouseout:"this.setAttribute('r', parseInt(this.getAttribute('r')) - 1)"});b._showStatus(r,l._name,l._values[o])}}else{var s;s="object"==typeof l._fill?b._wrapper.group(this._chart,a.extend({class_:"series"+c,stroke:l._stroke,strokeWidth:l._strokeWidth},l._settings||{})):b._wrapper.group(this._chart,a.extend({class_:"series"+c,fill:l._fill,stroke:l._stroke,strokeWidth:l._strokeWidth},l._settings||{}));for(var o=0;o<l._values.length;o++){var t=b._wrapper.rect(s,g[b.X]+h*(f+o*(d*e+f)+c*e),g[b.Y]+i*(b.yAxis._scale.max-("log"===b.yAxis._scale.type?j(l._values[o]):l._values[o])),h*e,i*("log"===b.yAxis._scale.type?j(l._values[o]):l._values[o]),"object"==typeof l._fill?{fill:l._fill[o]}:{});b._showStatus(t,l._name,l._values[o])}}},_drawXAxis:function(b,c,d,e,f,g,h){var i=b.xAxis;i._title&&b._wrapper.text(b._chartCont,g[b.X]+g[b.W]/2,parseInt(b._chartCont.attributes[3].value),i._title,a.extend({textAnchor:"middle"},i._titleFormat||{}));var j=b._wrapper.group(b._chartCont,a.extend({class_:"xAxis"},i._lineFormat)),k=i.labelRotation?"end":"middle",l=b._wrapper.group(b._chartCont,a.extend({class_:"xAxisLabels",textAnchor:k},i._labelFormat));if(b._wrapper.line(j,g[b.X],g[b.Y]+g[b.H],g[b.X]+g[b.W],g[b.Y]+g[b.H]),i._ticks.major){for(var m=b._getTickOffsets(i,!0),n=1;d>n;n++){var o=g[b.X]+h*(f/2+n*(c*e+f));b._wrapper.line(j,o,g[b.Y]+g[b.H]+m[0]*i._ticks.size,o,g[b.Y]+g[b.H]+m[1]*i._ticks.size)}for(var n=0;d>n;n++){var o=g[b.X]+h*(f/2+(n+.5)*(c*e+f));b._wrapper.text(l,o,g[b.Y]+g[b.H]+2*i._ticks.size,i._labels?i._labels[n]:""+n,i.labelRotation?{transform:"rotate("+i.labelRotation+", "+o+", "+(g[b.Y]+g[b.H]+2*i._ticks.size)+")"}:null)}}}}),a.extend(s.prototype,{title:function(){return"Stacked column chart"},description:function(){return"Compare sets of values as vertical bars showing relative contributions to the whole for each category."},options:function(){return E},drawGraph:function(b){var c=b._drawChartBackground(!0,!0),d=b._getDims();b._gridlines[0]&&b.xAxis._ticks.major&&b._drawGridlines(c,b._getPercentageAxis(),!0,d,b._gridlines[0]);var e=b._chartOptions.barWidth||10,f=b._chartOptions.barGap||10,g=b._series.length,h=g?b._series[0]._values.length:0,i=d[b.W]/((e+f)*h+f),j=d[b.H];this._chart=b._wrapper.group(b._chartCont,{class_:"chart"}),this._drawColumns(b,g,h,e,f,d,i,j),b._drawTitle(),b._wrapper.text(b._chartCont,0,0,a.svg.graphing.region.percentageText,a.extend({textAnchor:"middle",transform:"translate("+(d[b.X]-b.yAxis._titleOffset)+","+(d[b.Y]+d[b.H]/2)+") rotate(-90)"},b.yAxis._titleFormat||{}));var k=a.extend({},b._getPercentageAxis());a.extend(k._labelFormat,b.yAxis._labelFormat||{}),b._drawAxis(k,"yAxis",d[b.X],d[b.Y],d[b.X],d[b.Y]+d[b.H]),this._drawXAxis(b,h,e,f,d,i),b._drawLegend()},_drawColumns:function(b,c,d,e,f,g,h,i){for(var j=b._getTotals(),l=[],m=0;d>m;m++)l[m]=0;for(var n=0;c>n;n++)for(var o=b._series[n],p=b._wrapper.group(this._chart,a.extend({class_:"series"+n,fill:o._fill,stroke:o._stroke,strokeWidth:o._strokeWidth},o._settings||{})),m=0;m<o._values.length;m++){l[m]+=o._values[m];var q=b._wrapper.rect(p,g[b.X]+h*(f+m*(e+f)),g[b.Y]+i*(j[m]-l[m])/j[m],h*e,i*o._values[m]/j[m]);b._showStatus(q,o._name,k(o._values[m]/j[m]*100,2))}},_drawXAxis:function(b,c,d,e,f,g){var h=b.xAxis;h._title&&b._wrapper.text(b._chartCont,f[b.X]+f[b.W]/2,f[b.Y]+f[b.H]+h._titleOffset,h._title,a.extend({textAnchor:"middle"},h._titleFormat||{}));var i=b._wrapper.group(b._chartCont,a.extend({class_:"xAxis"},h._lineFormat)),j=b._wrapper.group(b._chartCont,a.extend({class_:"xAxisLabels",textAnchor:"middle"},h._labelFormat));if(b._wrapper.line(i,f[b.X],f[b.Y]+f[b.H],f[b.X]+f[b.W],f[b.Y]+f[b.H]),h._ticks.major){for(var k=b._getTickOffsets(h,!0),l=1;c>l;l++){var m=f[b.X]+g*(e/2+l*(d+e));b._wrapper.line(i,m,f[b.Y]+f[b.H]+k[0]*h._ticks.size,m,f[b.Y]+f[b.H]+k[1]*h._ticks.size)}for(var l=0;c>l;l++){var m=f[b.X]+g*(e/2+(l+.5)*(d+e));b._wrapper.text(j,m,f[b.Y]+f[b.H]+2*h._ticks.size,h._labels?h._labels[l]:""+l)}}}}),a.extend(t.prototype,{title:function(){return"Stacked area chart"},description:function(){return"Compare sets of values as areas showing relative contributions to the whole for each category."},options:function(){return E},drawGraph:function(b){var c=b._drawChartBackground(!0,!0),d=b._getDims();b._gridlines[0]&&b.xAxis._ticks.major&&b._drawGridlines(c,b._getPercentageAxis(),!0,d,b._gridlines[0]);var e=b._series.length,f=e?b._series[0]._values.length:0,g=d[b.W]/f,h=d[b.H];this._chart=b._wrapper.group(b._chartCont,{class_:"chart"}),this._drawAreas(b,e,f,d,g,h),b._drawTitle(),b._wrapper.text(b._chartCont,0,0,a.svg.graphing.region.percentageText,a.extend({textAnchor:"middle",transform:"translate("+(d[b.X]-b.yAxis._titleOffset)+","+(d[b.Y]+d[b.H]/2)+") rotate(-90)"},b.yAxis._titleFormat||{}));var i=a.extend({},b._getPercentageAxis());a.extend(i._labelFormat,b.yAxis._labelFormat||{}),b._drawAxis(i,"yAxis",d[b.X],d[b.Y],d[b.X],d[b.Y]+d[b.H]),this._drawXAxis(b,f,d,g),b._drawLegend()},_drawAreas:function(a,b,c,d,e,f){for(var g=a._getTotals(),h=[],i=0,j=0;j<g.length;j++)g[j]>i&&(i=g[j]);for(var j=0;c>j;j++)h[j]=0;for(var k=[],l=0;b>l;l++){k[l]="";for(var m=a._series[l],j=0;j<m._values.length;j++){h[j]+=m._values[j],k[l]+=0===j?"M":"L";var n=d[a.Y]+f*(g[j]-h[j])/g[j];a.normalizeStackedArea||(n=d[a.Y]+f-f/i*(h[j]-m._values[j])),k[l]+=d[a.X]+e*j+","+n,j===m._values.length-1&&(k[l]+="L"+(d[a.X]+e*(j+1))+","+n)}if(0===l&&a.normalizeStackedArea)k[l]+="L"+(d[a.X]+e*m._values.length)+","+(d[a.Y]+d[a.H])+"L"+d[a.X]+","+(d[a.Y]+d[a.H]);else for(var j=m._values.length-1;j>-1;j--){var n=d[a.Y]+f*(g[j]-h[j]+m._values[j])/g[j];a.normalizeStackedArea||(n=d[a.Y]+f-f/i*h[j]),j===m._values.length-1&&(k[l]+="L"+(d[a.X]+e*(j+1))+","+n),k[l]+="L"+(d[a.X]+e*j)+","+n}}for(j=0;j<k.length;j++){var m=a._series[j];a._wrapper.path(this._chart,k[j],{fill:m._fill,stroke:m._stroke,strokeWidth:m._strokeWidth})}},_drawXAxis:function(b,c,d,e){var f=b.xAxis;f._title&&b._wrapper.text(b._chartCont,d[b.X]+d[b.W]/2,d[b.Y]+d[b.H]+f._titleOffset,f._title,a.extend({textAnchor:"middle"},f._titleFormat||{}));var g=b._wrapper.group(b._chartCont,a.extend({class_:"xAxis"},f._lineFormat)),h=b._wrapper.group(b._chartCont,a.extend({class_:"xAxisLabels",textAnchor:"middle"},f._labelFormat));if(b._wrapper.line(g,d[b.X],d[b.Y]+d[b.H],d[b.X]+d[b.W],d[b.Y]+d[b.H]),f._ticks.major){for(var i=b._getTickOffsets(f,!0),j=1;c>j;j++)if(!(j%f._ticks.major>0)){var k=d[b.X]+e*j;b._wrapper.line(g,k,d[b.Y]+d[b.H]+i[0]*f._ticks.size,k,d[b.Y]+d[b.H]+i[1]*f._ticks.size)}for(var j=0;c>j;j++)if(!(j%f._ticks.major>0)){var k=d[b.X]+e*(j+.5);b._wrapper.text(h,k,d[b.Y]+d[b.H]+2*f._ticks.size,f._labels?f._labels[j]:""+j)}}}}),a.extend(u.prototype,{title:function(){return"Basic row chart"},description:function(){return"Compare sets of values as horizontal rows with grouped categories."},options:function(){return E},drawGraph:function(a){var b=a._drawChartBackground(!0,!0),c=a._getDims();a._drawGridlines(b,a.yAxis,!1,c,a._gridlines[0]);var d=a._chartOptions.barWidth||10,e=a._chartOptions.barGap||10,f=a._series.length,g=f?a._series[0]._values.length:0,h=c[a.W]/(a.yAxis._scale.max-a.yAxis._scale.min),i=c[a.H]/((f*d+e)*g+e);this._chart=a._wrapper.group(a._chartCont,{class_:"chart"});for(var j=0;f>j;j++)this._drawSeries(a,j,f,d,e,c,h,i);a._drawTitle(),this._drawAxes(a,f,g,d,e,c,i),a._drawLegend()},_drawSeries:function(b,c,d,e,f,g,h,i){for(var j=b._series[c],k=b._wrapper.group(this._chart,a.extend({class_:"series"+c,fill:j._fill,stroke:j._stroke,strokeWidth:j._strokeWidth},j._settings||{})),l=0;l<j._values.length;l++){var m=b._wrapper.rect(k,g[b.X]+h*(0-b.yAxis._scale.min),g[b.Y]+i*(f+l*(d*e+f)+c*e),h*j._values[l],i*e);b._showStatus(m,j._name,j._values[l])}},_drawAxes:function(b,c,d,e,f,g,h){var i=b.yAxis;i&&(i._title&&b._wrapper.text(b._chartCont,g[b.X]+g[b.W]/2,g[b.Y]+g[b.H]+i._titleOffset,i._title,i._titleFormat),b._drawAxis(i,"xAxis",g[b.X],g[b.Y]+g[b.H],g[b.X]+g[b.W],g[b.Y]+g[b.H]));var i=b.xAxis;i._title&&b._wrapper.text(b._chartCont,0,0,i._title,a.extend({textAnchor:"middle",transform:"translate("+(g[b.X]-i._titleOffset)+","+(g[b.Y]+g[b.H]/2)+") rotate(-90)"},i._titleFormat||{}));var j=b._wrapper.group(b._chartCont,a.extend({class_:"yAxis"},i._lineFormat)),k=b._wrapper.group(b._chartCont,a.extend({class_:"yAxisLabels",textAnchor:"end"},i._labelFormat));if(b._wrapper.line(j,g[b.X],g[b.Y],g[b.X],g[b.Y]+g[b.H]),i._ticks.major){for(var l=b._getTickOffsets(i,!1),m=1;d>m;m++){var n=g[b.Y]+h*(f/2+m*(c*e+f));b._wrapper.line(j,g[b.X]+l[0]*i._ticks.size,n,g[b.X]+l[1]*i._ticks.size,n)}for(var m=0;d>m;m++){var n=g[b.Y]+h*(f/2+(m+.5)*(c*e+f));b._wrapper.text(k,g[b.X]-i._ticks.size,n,i._labels?i._labels[m]:""+m)}}}}),a.extend(v.prototype,{title:function(){return"Stacked row chart"},description:function(){return"Compare sets of values as horizontal bars showing relative contributions to the whole for each category."},options:function(){return E},drawGraph:function(b){var c=b._drawChartBackground(!0,!0),d=b._getDims();b._gridlines[0]&&b.xAxis._ticks.major&&b._drawGridlines(c,b._getPercentageAxis(),!1,d,b._gridlines[0]);var e=b._chartOptions.barWidth||10,f=b._chartOptions.barGap||10,g=b._series.length,h=g?b._series[0]._values.length:0,i=d[b.W],j=d[b.H]/((e+f)*h+f);this._chart=b._wrapper.group(b._chartCont,{class_:"chart"}),this._drawRows(b,g,h,e,f,d,i,j),b._drawTitle(),b._wrapper.text(b._chartCont,d[b.X]+d[b.W]/2,d[b.Y]+d[b.H]+b.xAxis._titleOffset,a.svg.graphing.region.percentageText,a.extend({textAnchor:"middle"},b.yAxis._titleFormat||{}));var k=a.extend({},b._getPercentageAxis());a.extend(k._labelFormat,b.yAxis._labelFormat||{}),b._drawAxis(k,"xAxis",d[b.X],d[b.Y]+d[b.H],d[b.X]+d[b.W],d[b.Y]+d[b.H]),this._drawYAxis(b,h,e,f,d,j),b._drawLegend()},_drawRows:function(b,c,d,e,f,g,h,i){for(var j=b._getTotals(),l=[],m=0;d>m;m++)l[m]=0;for(var n=0;c>n;n++)for(var o=b._series[n],p=b._wrapper.group(this._chart,a.extend({class_:"series"+n,fill:o._fill,stroke:o._stroke,strokeWidth:o._strokeWidth},o._settings||{})),m=0;m<o._values.length;m++){var q=b._wrapper.rect(p,g[b.X]+h*l[m]/j[m],g[b.Y]+i*(f+m*(e+f)),h*o._values[m]/j[m],i*e);b._showStatus(q,o._name,k(o._values[m]/j[m]*100,2)),l[m]+=o._values[m]}},_drawYAxis:function(b,c,d,e,f,g){var h=b.xAxis;h._title&&b._wrapper.text(b._chartCont,0,0,h._title,a.extend({textAnchor:"middle",transform:"translate("+(f[b.X]-h._titleOffset)+","+(f[b.Y]+f[b.H]/2)+") rotate(-90)"},h._titleFormat||{}));var i=b._wrapper.group(b._chartCont,a.extend({class_:"yAxis"},h._lineFormat)),j=b._wrapper.group(b._chartCont,a.extend({class_:"yAxisLabels",textAnchor:"end"},h._labelFormat));if(b._wrapper.line(i,f[b.X],f[b.Y],f[b.X],f[b.Y]+f[b.H]),h._ticks.major){for(var k=b._getTickOffsets(h,!1),l=1;c>l;l++){var m=f[b.Y]+g*(e/2+l*(d+e));b._wrapper.line(i,f[b.X]+k[0]*h._ticks.size,m,f[b.X]+k[1]*h._ticks.size,m)}for(var l=0;c>l;l++){var m=f[b.Y]+g*(e/2+(l+.5)*(d+e));b._wrapper.text(j,f[b.X]-h._ticks.size,m,h._labels?h._labels[l]:""+l)}}}}),a.extend(w.prototype,{title:function(){return"Basic line chart"},description:function(){return"Compare sets of values as continuous lines."},options:function(){return[]},drawGraph:function(a){a._drawChartBackground();var b=a._getDims();a.xAxis._scale.max=a._series[0]._values.length-1;var c=b[a.W]/(a.xAxis._scale.max-a.xAxis._scale.min),d=b[a.H]/(a.yAxis._scale.max-a.yAxis._scale.min);this._chart=a._wrapper.group(a._chartCont,{class_:"chart"});for(var e=0;e<a._series.length;e++)this._drawSeries(a,e,b,c,d);a._drawTitle(),a._drawAxes(!0),this._drawXAxis(a,a._series[0]._values.length,b,c),a._drawLegend()},_drawSeries:function(b,c,d,e,f){for(var g=b._series[c],h=b._wrapper.createPath(),i=[],j=0;j<g._values.length;j++){var k=d[b.X]+j*e,l=d[b.Y]+(b.yAxis._scale.max-g._values[j])*f;0===j?h.move(k,l):h.line(k,l),i.push([k,l])}for(g._settings.noLines||b._wrapper.path(this._chart,h,a.extend({id:"series"+c,fill:"none",stroke:"white"===g._stroke?"black":g._stroke,strokeWidth:g._strokeWidth},g._settings||{})),j=0;j<i.length;j++){var m=b._wrapper.circle(this._chart,i[j][0],i[j][1],3,{fill:"white",strokeWidth:1,stroke:"white"===g._stroke?"black":g._stroke,onmouseover:"this.setAttribute('r', parseInt(this.getAttribute('r')) + 1)",onmouseout:"this.setAttribute('r', parseInt(this.getAttribute('r')) - 1)"});b._showStatus(m,g._name,g._values[j])}},_drawXAxis:function(b,c,d,e){var f=b.xAxis;f._title&&b._wrapper.text(b._chartCont,d[b.X]+d[b.W]/2,d[b.Y]+d[b.H]+f._titleOffset,f._title,a.extend({textAnchor:"middle"},f._titleFormat||{}));var g=b._wrapper.group(b._chartCont,a.extend({class_:"xAxis"},f._lineFormat)),h=f.labelRotation?"end":"middle",i=b._wrapper.group(b._chartCont,a.extend({class_:"xAxisLabels",textAnchor:h},f._labelFormat));if(b._wrapper.line(g,d[b.X],d[b.Y]+d[b.H],d[b.X]+d[b.W],d[b.Y]+d[b.H]),f._ticks.major){for(var j=b._getTickOffsets(f,!0),k=1;c>k;k++){var l=d[b.X]+e*k;b._wrapper.line(g,l,d[b.Y]+d[b.H]+j[0]*f._ticks.size,l,d[b.Y]+d[b.H]+j[1]*f._ticks.size)}for(var k=0;c>k;k++){var l=d[b.X]+e*k;b._wrapper.text(i,l,d[b.Y]+d[b.H]+2*f._ticks.size,f._labels?f._labels[k]:""+k,f.labelRotation?{transform:"rotate("+f.labelRotation+", "+l+", "+(d[b.Y]+d[b.H]+2*f._ticks.size)+")"}:null)}}}}),a.extend(x.prototype,{_options:["explode (number or number[]) - indexes of sections to explode out of the pie","explodeDist (number) - the distance to move an exploded section","pieGap (number) - the distance between pies for multiple values"],title:function(){return"Pie chart"},description:function(){return"Compare relative sizes of values as contributions to the whole."},options:function(){return this._options},drawGraph:function(a){a._drawChartBackground(!0,!0),this._chart=a._wrapper.group(a._chartCont,{class_:"chart"});var b=a._getDims();this._drawSeries(a,b),a._drawTitle(),a._drawLegend()},_drawSeries:function(b,c){var d=b._getTotals(),e=b._series.length,f=e?b._series[0]._values.length:0,h=b._wrapper.createPath(),i=[];i=g(i)?i:[i];for(var j=b._chartOptions.explodeDist||10,l=1>=f?0:b._chartOptions.pieGap||10,m=(c[b.W]-f*l-l)/f/2,n=c[b.H]/2,o=Math.min(m,n)-(i.length>0?j:0),p=b._wrapper.group(b._chartCont,a.extend({class_:"xAxisLabels",textAnchor:"middle"},b.xAxis._labelFormat)),q=[],r=0;f>r;r++){for(var s=c[b.X]+m+r*(2*Math.min(m,n)+l)+l,t=c[b.Y]+n,u=0,v=0;e>v;v++){var w=b._series[v];if(0===r&&(q[v]=b._wrapper.group(this._chart,a.extend({class_:"series"+v,fill:w._fill,stroke:w._stroke,strokeWidth:w._strokeWidth},w._settings||{}))),0!==w._values[r]){var x=u/d[r]*2*Math.PI;u+=w._values[r];for(var y=u/d[r]*2*Math.PI,z=!1,A=0;A<i.length;A++)if(i[A]===v){z=!0;break}var B=s+(z?j*Math.cos((x+y)/2):0),C=t+(z?j*Math.sin((x+y)/2):0),D=b._wrapper.path(q[v],h.reset().move(B,C).line(B+o*Math.cos(x),C+o*Math.sin(x)).arc(o,o,0,y-x<Math.PI?0:1,1,B+o*Math.cos(y),C+o*Math.sin(y)).close());b._showStatus(D,w._name,k((y-x)/2/Math.PI*100,2))}}b.xAxis&&b.xAxis._labels[r]&&b._wrapper.text(p,s,c[b.Y]+c[b.H]+b.xAxis._titleOffset,b.xAxis._labels[r])}}}),a.svg.graphing.addChartType("column",new r),a.svg.graphing.addChartType("stackedColumn",new s),a.svg.graphing.addChartType("row",new u),a.svg.graphing.addChartType("stackedRow",new v),a.svg.graphing.addChartType("line",new w),a.svg.graphing.addChartType("pie",new x),a.svg.graphing.addChartType("stackedArea",new t),a.svg.graphing.addChartType("deviation",new q),a.svg.addExtension("plot",y),a.extend(y.prototype,{X:0,Y:1,W:2,H:3,L:0,T:1,R:2,B:3,container:function(a){return 0===arguments.length?this._plotCont:(this._plotCont=a,this)},area:function(a,b,c,d){return 0===arguments.length?this._area:(this._area=g(a)?a:[a,b,c,d],this._drawPlot(),this)},format:function(b,c,d){return 0===arguments.length?this._areaFormat:("object"==typeof c&&(d=c,c=null),this._areaFormat=a.extend({fill:b},c?{stroke:c}:{},d||{}),this._drawPlot(),this)},gridlines:function(a,b){return 0===arguments.length?this._gridlines:(this._gridlines=["string"==typeof a?{stroke:a}:a,"string"==typeof b?{stroke:b}:b],null===this._gridlines[0]&&null===this._gridlines[1]&&(this._gridlines=[]),this._drawPlot(),this)},equalXY:function(a){return 0===arguments.length?this._equalXY:(this._equalXY=a,this)},title:function(b,c,d,e){return 0===arguments.length?this._title:("number"!=typeof c&&(e=d,d=c,c=null),"string"!=typeof d&&(e=d,d=null),this._title={value:b,offset:c||this._title.offset,settings:a.extend({textAnchor:"middle",fontSize:"15px"},d?{fill:d}:{},e||{})},this._drawPlot(),this)},addFunction:function(a,b,c,d,e,f,g){return this._functions.push(new z(this,a,b,c,d,e,f,g)),this._drawPlot(),this},functions:function(a){return(arguments.length>0?this._functions[a]:null)||this._functions},noDraw:function(){return this._drawNow=!1,this},redraw:function(){return this._drawNow=!0,this._drawPlot(),this},status:function(a){return this._onstatus=a,this},_drawPlot:function(){if(this._drawNow){for(;this._plotCont.firstChild;)this._plotCont.removeChild(this._plotCont.firstChild);this._plotCont.parent||this._wrapper._svg.appendChild(this._plotCont),this._plotCont.width?this._plotCont.width.baseVal?this._plotCont.width.baseVal.value=this._plotCont.width.baseVal.value||this._wrapper._width():this._plotCont.width=this._plotCont.width||this._wrapper._width():this._plotCont.setAttribute("width",parseInt(this._plotCont.getAttribute("width"),10)||this._wrapper._width()),this._plotCont.height?this._plotCont.height.baseVal?this._plotCont.height.baseVal.value=this._plotCont.height.baseVal.value||this._wrapper._height():this._plotCont.height=this._plotCont.height||this._wrapper._height():this._plotCont.setAttribute("height",parseInt(this._plotCont.getAttribute("height"),10)||this._wrapper._height()),this._drawChartBackground();var a=this._getDims(),b=this._wrapper.other(this._plotCont,"clipPath",{id:"clip"+this._uuid});this._wrapper.rect(b,a[this.X],a[this.Y],a[this.W],a[this.H]),this._plot=this._wrapper.group(this._plotCont,{class_:"foreground",clipPath:"url(#clip"+this._uuid+")"}),this._drawAxis(!0),this._drawAxis(!1);for(var c=0;c<this._functions.length;c++)this._plotFunction(this._functions[c],c);if(this.plotPoints.length)for(var c=0;c<this.plotPoints.length;c++)this.connected?this._plotConnectedPoints(this.plotPoints[c],c):this._plotPoints(this.plotPoints[c],c);this._drawTitle(),this._drawLegend()}},_getValue:function(a,b){return a[b]?a[b].baseVal?a[b].baseVal.value:a[b]:parseInt(a.getAttribute(b),10)},_getDims:function(a){var b=null!==a;a=a||this._area;var c=this._getValue(this._plotCont,"width"),d=this._getValue(this._plotCont,"height"),e=a[this.L]>1?a[this.L]:c*a[this.L],f=a[this.T]>1?a[this.T]:d*a[this.T],g=(a[this.R]>1?a[this.R]:c*a[this.R])-e,h=(a[this.B]>1?a[this.B]:d*a[this.B])-f;if(this._equalXY&&!b){var i=Math.min(g/(this.xAxis._scale.max-this.xAxis._scale.min),h/(this.yAxis._scale.max-this.yAxis._scale.min));g=i*(this.xAxis._scale.max-this.xAxis._scale.min),h=i*(this.yAxis._scale.max-this.yAxis._scale.min)}return[e,f,g,h]},_getScales:function(){var a=this._getDims();return[a[this.W]/(this.xAxis._scale.max-this.xAxis._scale.min),a[this.H]/(this.yAxis._scale.max-this.yAxis._scale.min)]},_drawChartBackground:function(a,b){var c=this._wrapper.group(this._plotCont,{class_:"background"}),d=this._getDims();return this._wrapper.rect(c,d[this.X],d[this.Y],d[this.W],d[this.H],this._areaFormat),this._gridlines[0]&&this.yAxis._ticks.major&&!b&&this._drawGridlines(c,!0,this._gridlines[0],d),this._gridlines[1]&&this.xAxis._ticks.major&&!a&&this._drawGridlines(c,!1,this._gridlines[1],d),c},_drawGridlines:function(a,b,c,d){var e=this._wrapper.group(a,c),f=b?this.yAxis:this.xAxis,g=this._getScales(),h=Math.floor(f._scale.min/f._ticks.major)*f._ticks.major;for(h+=h<=f._scale.min?f._ticks.major:0;h<f._scale.max;){var i=(b?f._scale.max-h:h-f._scale.min)*g[b?1:0]+(b?d[this.Y]:d[this.X]);this._wrapper.line(e,b?d[this.X]:i,b?i:d[this.Y],b?d[this.X]+d[this.W]:i,b?i:d[this.Y]+d[this.H]),h+=f._ticks.major}},_drawAxis:function(b){var c=(b?"x":"y")+"Axis",d=b?this.xAxis:this.yAxis,e=b?this.yAxis:this.xAxis,f=this._getDims(),g=this._getScales(),h=this._wrapper.group(this._plot,a.extend({class_:c},d._lineFormat)),i=(this._wrapper.group(this._plot,a.extend({class_:c+"Labels",textAnchor:b?"middle":"end"},d._labelFormat)),(b?e._scale.max:-e._scale.min)*g[b?1:0]+(b?f[this.Y]:f[this.X]));if(this._wrapper.line(h,b?f[this.X]:i,b?i:f[this.Y],b?f[this.X]+f[this.W]:i,b?i:f[this.Y]+f[this.H],{strokeWidth:1.5}),d._ticks.major){var j=d._ticks.size,k=Math.floor(d._scale.min/d._ticks.major)*d._ticks.major;k=k<d._scale.min?k+d._ticks.major:k;var l=d._ticks.minor?Math.floor(d._scale.min/d._ticks.minor)*d._ticks.minor:d._scale.max+1;l=l<d._scale.min?l+d._ticks.minor:l;for(var m=["nw"===d._ticks.position||"both"===d._ticks.position?-1:0,"se"===d._ticks.position||"both"===d._ticks.position?1:0];k<=d._scale.max||l<=d._scale.max;){var n=Math.min(k,l),o=n===k?j:j/2,p=(b?n-d._scale.min:d._scale.max-n)*g[b?0:1]+(b?f[this.X]:f[this.Y]);if(this._wrapper.line(this._plotCont,b?p:i+o*m[0],b?i+o*m[0]:p,b?p:i+o*m[1],b?i+o*m[1]:p),n===k&&0!==n){var q=b?f[this.Y]+f[this.H]:f[this.X],r=this._wrapper.createText().string("10").span(n,{dy:-10,fontSize:10});this._wrapper.text(this._plotCont,b?p:q-j,b?q+j+12:p+j/2,"log"===d._scale.type?r:""+n,{textAnchor:b?"middle":"end"})}k+=n===k?d._ticks.major:0,l+=n===l?d._ticks.minor:0;var s=k.toString(),t=d._ticks.major.toString();if(t.substr(t.indexOf(".")+1).length>3&&(t=t.substr(0,t.indexOf(".")+4)),parseFloat(t)<.001)return;s.substr(s.indexOf(".")+1).length>t.substr(t.indexOf(".")+1).length&&(k=parseFloat(k.toFixed(t.substr(t.indexOf(".")+1).length)))}}d._title&&(b?this._wrapper.text(this._plotCont,f[this.X]+f[this.W]/2,f[this.Y]+f[this.H]+d._titleOffset,d._title,d._titleFormat):this._wrapper.text(this._plotCont,0,0,d._title,a.extend({textAnchor:"middle",transform:"translate("+(f[this.X]-d._titleOffset)+","+(f[this.Y]+f[this.H]/2)+") rotate(-90)"},d._titleFormat||{})))},_plotFunction:function(b,c){for(var d=this._getDims(),e=this._getScales(),f=this._wrapper.createPath(),g=b._range||[this.xAxis._scale.min,this.xAxis._scale.max],h=(g[1]-g[0])/b._points,i=!0,j=0;j<=b._points;j++){var k=g[0]+j*h;if(k>this.xAxis._scale.max+h)break;if(!(k<this.xAxis._scale.min-h)){var l=(k-this.xAxis._scale.min)*e[0]+d[this.X],m=d[this.H]-(b._fn(k)-this.yAxis._scale.min)*e[1]+d[this.Y];f[(i?"move":"line")+"To"](l,m),i=!1}}var n=this._wrapper.path(this._plot,f,a.extend({class_:"fn"+c,fill:"none",
stroke:b._stroke,strokeWidth:b._strokeWidth},b._settings||{}));this._showStatus(n,b._name)},_plotPoints:function(b,c){var d=this._getScales(),e=this._getDims(),f=e[0]-this.xAxis._scale.min*d[0],g=e[1]+e[3]+this.yAxis._scale.min*d[1],h={size:this.series[c].pointSize||6,shape:this.series[c].shape,filled:this.series[c].filled||!1,color:this.series[c].color};for(i=0;i<b.length;i++){var k=b[i];a.extend(k,h),pxscaled="log"===this.xAxis._scale.type?j(k.x):k.x,pyscaled="log"===this.yAxis._scale.type?j(k.y):k.y,k.imgX=pxscaled*d[0]+f,k.imgY=g-pyscaled*d[1];var l=k.title?k.title:"";switch(k.shape){case"circle":k.svg=this._wrapper.circle(this._plot,pxscaled*d[0]+f,g-pyscaled*d[1],k.size/2,{fill:k.filled?k.color:"none",strokeWidth:1,stroke:k.color,title:l});break;case"square":k.svg=this._wrapper.rect(this._plot,pxscaled*d[0]+f-k.size/2,g-pyscaled*d[1]-k.size/2,k.size,k.size,{fill:k.filled?k.color:"none",strokeWidth:1,stroke:k.color,title:l});break;case"triangle":k.svg=this._wrapper.polygon(this._plot,[[pxscaled*d[0]+f-k.size/2,g-pyscaled*d[1]-k.size/2],[pxscaled*d[0]+f+k.size/2,g-pyscaled*d[1]-k.size/2],[pxscaled*d[0]+f,g-pyscaled*d[1]+k.size/2]],{fill:k.filled?k.color:"none",strokeWidth:1,stroke:k.color,title:l})}}},_plotConnectedPoints:function(b,c){var d=this._getScales(),e=this._getDims(),f=e[0]-this.xAxis._scale.min*d[0],g=e[1]+e[3]+this.yAxis._scale.min*d[1],h={size:8,shape:this.series[c].shape,line:this.series[c].color||"blue",fill:this.series[c].fillColor||"black"};for(i=0;i<b.length;i++){var k=b[i];if(a.extend(k,h),k.imgX=("log"===this.xAxis._scale.type?j(k.x):k.x)*d[0]+f,k.imgY=g-("log"===this.yAxis._scale.type?j(k.y):k.y)*d[1],i>0&&this._wrapper.line(this._plot,("log"===this.xAxis._scale.type?j(b[i-1].x):b[i-1].x)*d[0]+f,g-("log"===this.yAxis._scale.type?j(b[i-1].y):b[i-1].y)*d[1],("log"===this.xAxis._scale.type?j(k.x):k.x)*d[0]+f,g-("log"===this.yAxis._scale.type?j(k.y):k.y)*d[1],{strokeWidth:2,stroke:this.series[c].color||"blue"}),this.showDots){var l=k.title?k.title:"";k.svg=this._wrapper.circle(this._plot,("log"===this.xAxis._scale.type?j(k.x):k.x)*d[0]+f,g-("log"===this.yAxis._scale.type?j(k.y):k.y)*d[1],k.size/2,{fill:k.fill,strokeWidth:2,stroke:k.line,onmouseover:"this.setAttribute('r', parseInt(this.getAttribute('r')) + 1)",onmouseout:"this.setAttribute('r', parseInt(this.getAttribute('r')) - 1)",title:l})}}},pointsInBounds:function(a,b,c,d){var e=this.plotPoints,f=[];for(i=0;i<e.length;i++)for(h=0;h<e[i].length;h++)e[i][h].imgX>=a&&e[i][h].imgX<=c&&e[i][h].imgY>=b&&e[i][h].imgY<=d&&(e[i][h].series=i,f.push(e[i][h]));return f},_drawTitle:function(){this._wrapper.text(this._plotCont,this._getValue(this._plotCont,"width")/2,this._title.offset,this._title.value,this._title.settings)},_drawLegend:function(){if(this.legend._show)for(var a=this._wrapper.group(this._plotCont,{class_:"legend"}),b=this._getDims(this.legend._area),c=!1,d=this._functions.length||this.series.length,e=(c?b[this.W]:b[this.H])/d,f=b[this.X]+5,g=b[this.Y]+((c?b[this.H]:e)+this.legend._sampleSize)/2,h=0;d>h;h++){var i=this._functions.lenth?this._functions[h]:this.series[h];this._wrapper.rect(a,f+(c?h*e:0),g+(c?0:h*e)-this.legend._sampleSize,this.legend._sampleSize,this.legend._sampleSize,{fill:i._stroke?i._stroke:i.color}),this._wrapper.text(a,f+(c?h*e:0)+this.legend._sampleSize+5,g+(c?0:h*e),i._name?i._name:i.name,this.legend._textSettings)}},_showStatus:function(b,c){var d=this._onstatus;this._onstatus&&a(b).hover(function(a){d.apply(this,[c])},function(){d.apply(this,[""])})}}),a.extend(z.prototype,{name:function(a){return 0===arguments.length?this._name:(this._name=a,this._plot._drawPlot(),this)},fn:function(a,b){return 0===arguments.length?this._fn:("function"==typeof a&&(b=a,a=null),this._name=a||this._name,this._fn=b,this._plot._drawPlot(),this)},range:function(a,b){return 0===arguments.length?this._range:(this._range=null===a?null:[a,b],this._plot._drawPlot(),this)},points:function(a){return 0===arguments.length?this._points:(this._points=a,this._plot._drawPlot(),this)},format:function(b,c,d){return 0===arguments.length?a.extend({stroke:this._stroke,strokeWidth:this._strokeWidth},this._settings):("number"!=typeof c&&(d=c,c=null),this._stroke=b||this._stroke,this._strokeWidth=c||this._strokeWidth,a.extend(this._settings,d||{}),this._plot._drawPlot(),this)},end:function(){return this._plot}}),a.extend(B.prototype,{scale:function(a,b,c){return 0===arguments.length?this._scale:(this._scale.min="log"===c&&0!==a?j(a):a,this._scale.max="log"===c&&0!==b?j(b):b,this._scale.type=c,this._plot._drawPlot(),this)},ticks:function(a,b,c,d,e){return 0===arguments.length?this._ticks:("string"==typeof c&&(d=c,c=null),this._ticks.major="log"===e&&0!==a?1:a,this._ticks.minor="log"===e&&0!==b?1:b,this._ticks.size=c||this._ticks.size,this._ticks.position=d||this._ticks.position,this._plot._drawPlot(),this)},title:function(b,c,d,e){return 0===arguments.length?{title:this._title,offset:this._titleOffset,format:this._titleFormat}:("number"!=typeof c&&(e=d,d=c,c=null),"string"!=typeof d&&(e=d,d=null),this._title=b,this._titleOffset=null!==c?c:this._titleOffset,(d||e)&&(this._titleFormat=a.extend(e||{},d?{fill:d}:{})),this._plot._drawPlot(),this)},format:function(b,c){return 0===arguments.length?this._labelFormat:("string"!=typeof b&&(c=b,b=null),this._labelFormat=a.extend(c||{},b?{fill:b}:{}),this._plot._drawPlot(),this)},line:function(b,c,d){return 0===arguments.length?this._lineFormat:("number"!=typeof c&&(d=c,c=null),a.extend(this._lineFormat,{stroke:b,strokeWidth:c||this._lineFormat.strokeWidth},d||{}),this._plot._drawPlot(),this)},end:function(){return this._plot}}),a.extend(C.prototype,{show:function(a){return 0===arguments.length?this._show:(this._show=a,this._plot._drawPlot(),this)},area:function(a,b,c,d){return 0===arguments.length?this._area:(this._area=g(a)?a:[a,b,c,d],this._plot._drawPlot(),this)},settings:function(a,b,c){return 0===arguments.length?{sampleSize:this._sampleSize,bgSettings:this._bgSettings,textSettings:this._textSettings}:("object"==typeof a&&(c=b,b=a,a=null),this._sampleSize=a||this._sampleSize,this._bgSettings=b,this._textSettings=c||this._textSettings,this._plot._drawPlot(),this)},end:function(){return this._plot}}),a("<style>").prop("type","text/css").html("svg:svg {    display: none;}.svg_error {    color: red;    font-weight: bold;}.marquee {    fill-opacity: 0.2;    stroke: #000;    stroke-dasharray: 2,4;    vector-effect:non-scaling-stroke;}").appendTo("head")});