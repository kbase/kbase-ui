!function(a,b){a.KBWidget({name:"AbundanceDataBoxplot",version:"1.0.0",options:{id:null,ws:null,auth:null,name:0},ws_url:window.kbconfig.urls.workspace,loading_image:"assets/img/ajax-loader.gif",init:function(a){return this._super(a),this.render()},render:function(){var b=this,c=(this.uuidv4(),this.$elem),d=new Workspace(b.ws_url,{token:b.options.auth});return c.empty(),c.append('<div><img src="'+b.loading_image+'">&nbsp;&nbsp;loading data...</div>'),d.get_objects([{ref:b.options.ws+"/"+b.options.id}],function(a){if(c.empty(),0==a.length){var d="[Error] Object "+b.options.id+" does not exist in workspace "+b.options.ws;c.append("<div><p>"+d+">/p></div>")}else{var e=a[0].data,f=[],g=e.columns.length,h=e.rows.length;f="sparse"==e.matrix_type?b.sparse2dense(e.data,e.shape[0],e.shape[1]):e.data;for(var i=new Array(g),j=GooglePalette(g),k=0;g>k;k++)0==b.options.name?i[k]={name:e.columns[k].id,data:[],fill:j[k]}:i[k]={name:e.columns[k].name,data:[],fill:j[k]};for(var l=0,m=0;h>m;m++)for(var k=0;g>k;k++)l=Math.max(l,f[m][k]),i[k].data.push(f[m][k]);var n=0;window.hasOwnProperty("rendererGraph")&&rendererGraph.length&&(n=rendererGraph.length),c.append("<div id='outputGraph"+n+"' style='width: 95%;'></div>");var o="normalized";l>1&&(o="raw");var p=standaloneGraph.create({index:n});p.settings.target=document.getElementById("outputGraph"+n),p.settings.data=i,p.settings.y_title=o+" abundance",p.settings.show_legend=!1,p.settings.height=400,p.settings.type="deviation",p.settings.chartArea=[.1,.1,.95,.8],p.render(n)}},function(b){c.empty();var d=a("<div>");d.append(a("<p>").css({padding:"10px 20px"}).text("[Error] "+b.error.message)),c.append(d)}),b},sparse2dense:function(a,b,c){for(var d=new Array(b),e=0;b>e;e++)d[e]=Array.apply(null,new Array(c)).map(Number.prototype.valueOf,0);for(var e=0;e<a.length;e++)d[a[e][0]][a[e][1]]=a[e][2];return d},uuidv4:function(a,b){for(b=a="";a++<36;b+=51*a&52?(15^a?8^Math.random()*(20^a?16:4):4).toString(16):"-");return b}})}(jQuery);