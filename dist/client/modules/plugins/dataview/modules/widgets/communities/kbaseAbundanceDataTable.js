!function(a,b){a.KBWidget({name:"AbundanceDataTable",version:"1.0.0",options:{id:null,ws:null,auth:null,name:0},ws_url:window.kbconfig.urls.workspace,loading_image:"assets/img/ajax-loader.gif",init:function(a){return this._super(a),this.render()},render:function(){var b=this,c=(this.uuidv4(),this.$elem),d=new Workspace(b.ws_url,{token:b.options.auth});return c.empty(),c.append('<div><img src="'+b.loading_image+'">&nbsp;&nbsp;loading data...</div>'),d.get_objects([{ref:b.options.ws+"/"+b.options.id}],function(a){if(c.empty(),0==a.length){var d="[Error] Object "+b.options.id+" does not exist in workspace "+b.options.ws;c.append("<div><p>"+d+">/p></div>")}else{var e=a[0].data,f=[],g=[];f="sparse"==e.matrix_type?b.sparse2dense(e.data,e.shape[0],e.shape[1]):e.data;var h=e.columns.length+1,i=new Array(h);i[0]="Annotation";for(var j=0;j<e.columns.length;j++)0==b.options.name?i[j+1]=e.columns[j].id:i[j+1]=e.columns[j].name;for(var g=new Array(f.length),k=0;k<f.length;k++){g[k]=new Array(h),g[k][0]=e.rows[k].id;for(var j=0;j<f[k].length;j++){var l=Math.round(1e3*f[k][j])/1e3;l||(l="0"),g[k][j+1]=l}}var m=0;window.hasOwnProperty("rendererTable")&&rendererTable.length&&(m=rendererTable.length),c.append("<div id='outputTable"+m+"' style='width: 95%;'></div>");var n=standaloneTable.create({index:m});n.settings.target=document.getElementById("outputTable"+m),n.settings.data={header:i,data:g},n.settings.filter={0:{type:"text"}};for(var o=[120],p=1;p<i.length;p++)o.push(130);n.settings.minwidths=o,n.render(m)}},function(b){c.empty();var d=a("<div>");d.append(a("<p>").css({padding:"10px 20px"}).text("[Error] "+b.error.message)),c.append(d)}),b},sparse2dense:function(a,b,c){for(var d=new Array(b),e=0;b>e;e++)d[e]=Array.apply(null,new Array(c)).map(Number.prototype.valueOf,0);for(var e=0;e<a.length;e++)d[a[e][0]][a[e][1]]=a[e][2];return d},uuidv4:function(a,b){for(b=a="";a++<36;b+=51*a&52?(15^a?8^Math.random()*(20^a?16:4):4).toString(16):"-");return b}})}(jQuery);