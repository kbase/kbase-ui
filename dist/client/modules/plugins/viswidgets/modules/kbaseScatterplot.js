define(["jquery","d3","kb_vis_visWidget"],function(a,b){"use strict";a.KBWidget({name:"kbaseScatterplot",parent:"kbaseVisWidget",version:"1.0.0",options:{overColor:"yellow"},_accessors:[],defaultXDomain:function(){if(void 0===this.dataset())return[0,0];var a=.9*b.min(this.dataset().map(function(a){return a.x}));return a>0&&(a=0),[a,1.1*b.max(this.dataset().map(function(a){return a.x}))]},defaultYDomain:function(){if(void 0===this.dataset())return[0,0];var a=.9*b.min(this.dataset().map(function(a){return a.y}));return a>0&&(a=0),[a,1.1*b.max(this.dataset().map(function(a){return a.y}))]},renderChart:function(){if(void 0!==this.dataset()){var a=(this.chartBounds(),this),c=function(){this.attr("cx",function(b){return a.xScale()(b.x)}).attr("cy",function(b){return a.yScale()(b.y)}).attr("r",function(a){return a.weight}).attr("fill",function(a){return a.color})},d=function(){return this.on("mouseover",function(c){a.options.overColor&&b.select(this).attr("stroke",a.options.overColor).attr("stroke-width",3);var d=c.label?c.label:c.weight+" at ("+c.x+","+c.y+")";void 0!==d&&a.showToolTip({label:d})}).on("mouseout",function(c){a.options.overColor&&b.select(this).transition().attr("stroke","none"),a.data("D3svg").select(".yPadding").selectAll("g g text").attr("fill",function(a,b){return"black"}),a.hideToolTip()}),this},e=this.data("D3svg").select(".chart").selectAll(".point");e.data(this.dataset()).enter().append("path").attr("class","point").attr("transform",function(b){return"translate("+a.xScale()(b.x)+","+a.yScale()(b.y)+")"}).attr("d",function(a){return b.svg.symbol().type(a.shape).size(a.weight)()}).call(c).call(d),e.data(this.dataset()).exit().remove(),e.data(this.dataset()).call(d).transition().duration(500).call(c)}},setYScaleRange:function(a,b){return this._super(a.reverse(),b)}})});