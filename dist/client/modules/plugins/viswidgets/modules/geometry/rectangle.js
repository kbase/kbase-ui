define(["kb_vis_point","kb_vis_size"],function(a,b){"use strict";function c(c,d){void 0===c&&(c=new a(-1,-1)),void 0===d&&(d=new b(-1,-1)),this.origin=c,this.size=d}return c.prototype.invert=function(){return new c(this.height,this.width)},c.prototype.lowerRight=function(){return new a(this.origin.x+this.size.width,this.origin.y+this.size.height)},c.prototype.insetRect=function(d,e){return new c(new a(this.origin.x+d/2,this.origin.y+e/2),new b(this.size.width-d,this.size.height-e))},c.prototype.fromString=function(d){var e=d.match(/{{(.+),\s*(.+)},\s*{(.+),\s*(.+)}}/);return e?new c(new a(parseInt(e[1]),parseInt(e[2])),new b(parseInt(e[3]),parseInt(e[4]))):void 0},c.prototype.intersects=function(a){return this.origin.x<a.origin.x+a.size.width&&this.origin.x+this.size.width>a.origin.x&&this.origin.y<a.origin.y+a.size.height&&this.origin.y+this.size.height>a.origin.y?!0:!1},c.prototype.unionRect=function(a,b){var d=new c,e=this.lowerRight(),f=a.lowerRight();d.origin.x=Math.min(this.origin.x,a.origin.x),d.origin.y=Math.min(this.origin.y,a.origin.y);var g=Math.max(e.x,f.x),h=Math.max(e.y,f.y);return d.size.width=d.origin.x+g,d.size.height=d.origin.Y+h,void 0!==b&&(d.origin.x-=b,d.origin.y-=b,d.size.width+=2*b,d.size.height+=2*b),d},c.prototype.isValidRect=function(){return isNaN(this.origin.x)||isNaN(this.origin.y)||isNaN(this.size.width)||isNaN(this.size.height)?!1:!0},c.prototype.intersectRect=function(a){var b=new c,d=this.lowerRight(),e=a.lowerRight();b.origin.x=Math.max(this.origin.x,a.origin.x),b.origin.y=Math.max(this.origin.y,a.origin.y);var f=Math.min(d.x,e.x),g=Math.min(d.y,e.y);return b.size.width=f-b.origin.x,b.size.height=g-b.origin.y,b.size.width<=0&&(b.size.width=Number.NaN),b.size.height<=0&&(b.size.height=Number.NaN),b},c.prototype.containsPoint=function(a){var b=this.origin.x+this.size.width,c=this.origin.y+this.size.height;return a.x>=this.origin.x&&a.x<=b&&a.y>=this.origin.y&&a.y<=c?!0:!1},c.prototype.equals=function(a){return void 0===this||void 0===a?!1:this.origin.x===a.origin.x&&this.origin.y===a.origin.y&&this.size.width===a.size.width&&this.size.height===a.size.height},c.prototype.asString=function(){return"{"+this.origin.asString()+", "+this.size.asString()+"}"},c});