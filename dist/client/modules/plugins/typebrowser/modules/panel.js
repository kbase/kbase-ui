define(["bluebird","kb/common/html","kb/common/dom","kb/widget/widgetSet"],function(a,b,c,d){"use strict";function e(e){function f(){var a=b.tag("div"),c=b.panel,c=a({"class":"kbase-view kbase-typebrowser-view container-fluid","data-kbase-view":"typebrowser"},[a({"class":"row"},[a({"class":"col-sm-12"},[c("Type Browser",a({id:q.addWidget("typebrowser")}))])])]);return{title:"Type Browser for "+p.service("session").getUsername(),content:c}}function g(){return a["try"](function(){return q.init(e)})}function h(d){return a["try"](function(){return n=d,o=c.createElement("div"),n.appendChild(o),o.innerHTML=b.flatten(r.content),p.send("ui","setTitle",r.title),q.attach(d)})}function i(a){return q.start(a)}function j(a){return q.run(a)}function k(){return q.stop()}function l(){return a["try"](function(){return n.removeChild(o),o=null,q.detach()})}function m(){return q.destroy()}var n,o,p=e.runtime,q=d.make({runtime:p}),r=f();return{init:g,attach:h,detach:l,start:i,run:j,stop:k,destroy:m}}return{make:function(a){return e(a)}}});