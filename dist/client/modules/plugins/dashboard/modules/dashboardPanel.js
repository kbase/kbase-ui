define(["promise","kb/common/html","kb/common/observed","kb/widget/widgetSet"],function(a,b,c,d){"use strict";function e(e){function f(){return new a(function(a){var c=b.tag("div"),d=c({"class":"kbase-view kbase-dashboard-view container-fluid","data-kbase-view":"social"},[c({"class":"row"},[c({"class":"col-sm-8"},[c({id:o.addWidget("dashboardNarratives",{viewState:p})}),c({id:o.addWidget("dashboardSharedNarratives",{viewState:p})}),c({id:o.addWidget("dashboardPublicNarratives",{viewState:p})}),c({id:o.addWidget("dashboardApps",{viewState:p})})]),c({"class":"col-sm-4"},[c({id:o.addWidget("dashboardProfile",{viewState:p})}),c({id:o.addWidget("dashboardMetrics",{viewState:p})}),c({id:o.addWidget("dashboardCollaborators",{viewState:p})})])])]);a({title:"Your Dashboard",content:d})})}function g(b){return a["try"](function(){return l=b,m=document.createElement("div"),l.appendChild(m),f().then(function(a){return m.innerHTML=a.content,n.send("ui","setTitle",a.title),o.init()}).then(function(){return o.attach(m)})})}function h(a){return o.start(a)}function i(a){return o.run(a)}function j(){return o.stop()}function k(){return o.detach()}var l,m,n=e.runtime,o=d.make({runtime:n}),p=c.make();return{attach:g,start:h,run:i,stop:j,detach:k}}return{make:function(a){return e(a)}}});