define(["underscore","kb/widget/bases/simpleWidget","kb/common/html","kb_plugin_mainWindow","bootstrap"],function(a,b,c,d){"use strict";function e(d){function e(b){var c,d,e=b.type||"button";switch(b.icon&&(c=j({"class":"navbar-icon"},[k({"class":"fa fa-"+b.icon})])),b.path&&("string"==typeof b.path?d=b.path:a.isArray(b.path)&&(d=b.path.join("/"))),e){case"button":if(b.uri)return function(){var a={href:b.uri};return b.newWindow&&(a.target="_blank"),h({},i(a,[c,b.label]))}();if(void 0!==d)return h({},i({href:"#"+d},[c,b.label]));break;case"divider":return h({role:"presentation","class":"divider"})}}function f(a){var b=[];if(a||0!==a.length)return a.forEach(function(a){a?b.push(e(a)):console.log("Menu item not defined")}),b}function g(a){var b=c.tag("ul"),d=a.getState("menu"),g=[f(d.main),f(d.developer),f(d.help)].filter(function(a){return!a||a.length>0?!0:!1}).map(function(a){return a.join("")}).join(e({type:"divider"}));return b({"class":"dropdown-menu",role:"menu","aria-labeledby":"kb-nav-menu"},g)}var h=c.tag("li"),i=c.tag("a"),j=c.tag("div"),k=c.tag("span"),l=c.tag("button"),m=d.runtime;return b.make({runtime:m,on:{start:function(a){m.getService("menu").onChange(function(a){this.set("menu",a)}.bind(this))},render:function(){return j({"class":"kb-widget-menu"},[l({id:"kb-nav-menu","class":"btn btn-default navbar-btn kb-nav-btn",dataToggle:"dropdown",ariaHaspopup:"true"},[k({"class":"fa fa-navicon"})]),g(this)])}}})}return{make:function(a){return e(a)}}});