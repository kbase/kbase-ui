define(["kb/widget/bases/simpleWidget","kb/common/html"],function(a,b){"use strict";function c(c){function d(a){return a.set("buttons",{list:[],map:{}}),this}function e(a,b){var c=a.get("buttons");b.external&&(b.target="_blank"),"end"===b.place?(c.list.push(b),b.name&&(c.map[b.name]=b)):(c.list.unshift(b),b.name&&(c.map[b.name]=b)),a.set("buttons",c)}function f(a,c){var d,e,f={},g={},h=b.tag("div"),i=b.tag("a"),e=b.tag("button"),j=(b.genId(),[]);return c.label?d=h({"class":"kb-nav-btn-txt"},c.label):(d="",g.fontSize="150%"),c.url?(f={dataButton:c.name,disabled:c.disabled,"class":["btn","btn-"+(c.style||"default"),"navbar-btn","kb-nav-btn"].join(" "),href:c.url},c.target&&(f.target=c.target),e=i(f,[h({"class":"fa fa-"+c.icon,style:g}),d])):(f={dataButton:c.name,id:a.addDomEvent("click",function(a){a.preventDefault();try{c.callback()}catch(b){console.error("Error running button callback"),console.error(b),console.error(c)}}),disabled:c.disabled,"class":["btn","btn-"+(c.style||"default"),"navbar-btn","kb-nav-btn"].join(" ")},e=e(f,[h({"class":"fa fa-"+c.icon,style:g}),d])),{content:e,events:j}}function g(a){var c=b.tag("span"),d=c({"class":"navbar-buttons"},[a.get("buttons").list.map(function(b){return f(a,b).content}).join("")]);return d}function h(a,b){var c=a.get("buttons");c.map[b]&&(c.map[b].disabled=!1),a.set("buttons",c)}function i(a,b){var c=a.get("buttons");c.map[b]&&(c.map[b].disabled=!0),a.set("buttons",c)}return a.make({runtime:c.runtime,on:{init:function(){this.set("buttons",{list:[],map:{}})},start:function(){var a=this;this.recv("ui","addButton",function(b){e(a,b)}),this.recv("ui","clearButtons",function(){d(a)}),this.recv("ui","enableButton",function(b){h(a,b.name)}),this.recv("ui","disableButton",function(b){i(a,b.name)})},render:function(){return g(this)}}})}return{make:function(a){return c(a)}}});