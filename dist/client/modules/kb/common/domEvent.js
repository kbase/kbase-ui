define(["./dom","./html"],function(a,b){"use strict";function c(c){function d(a,c,d,e){d||(d=b.genId());var f={type:a,selector:"#"+d,handler:c};return h.push(f),d}function e(a,b,c){var d;d="string"==typeof a?{type:a,selector:c,handler:b}:a,h.push(d)}function f(){h.forEach(function(b){var c=a.qsa(b.selector);c.forEach(function(a){i.push({type:b.type,selector:b.selector,node:a,handler:b.handler,listener:a.addEventListener(b.type,b.handler,b.capture||!1)})})}),h=[]}function g(){i.forEach(function(a){a.listener&&(a.node.removeEventListener(a.type,a.handler),delete a.listener)}),i=[]}var h=[],i=[];return Object.freeze({addEvent:d,attachEvent:e,attachEvents:f,detachEvents:g})}return{make:function(a){return c(a)}}});