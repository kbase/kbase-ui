define(["underscore"],function(a){"use strict";function b(b){function c(b,c){if("string"==typeof b)b=b.split(".");else if(!a.isArray(b))throw new TypeError("Invalid type for key: "+typeof b);var d,e=h;for(d=0;d<b.length;d+=1){if(void 0===e||"object"!=typeof e||null===e)return c;e=e[b[d]]}return void 0===e?c:e}function d(a){"string"==typeof a&&(a=a.split("."));var b,c=h;for(b=0;b<a.length;b+=1){if(void 0===c||"object"!=typeof c||null===c)return!1;c=c[a[b]]}return void 0===c?!1:!0}function e(a,b){if("string"==typeof a&&(a=a.split(".")),0!==a.length){for(var c,d=a.pop(),e=h;a.length>0;)c=a.shift(),void 0===e[c]&&(e[c]={}),e=e[c];return e[d]=b,b}}function f(b,c){if("string"==typeof b&&(b=b.split(".")),0!==b.length){c=void 0===c?1:c;for(var d,e=b.pop(),f=h;b.length>0;)d=b.shift(),void 0===f[d]&&(f[d]={}),f=f[d];if(void 0===f[e])f[e]=c;else{if(!a.isNumber(f[e]))throw new Error("Can only increment a number");f[e]+=c}return f[e]}}function g(a){if("string"==typeof a&&(a=a.split(".")),0!==a.length){for(var b,c=a.pop(),d=h;a.length>0;){if(b=a.shift(),void 0===d[b])return!1;d=d[b]}return delete d[c],!0}}var h=b?b.data||{}:{};return{setItem:e,hasItem:d,getItem:c,incrItem:f,deleteItem:g,debug:function(){return h}}}return{create:function(){return b()},make:function(a){return b(a)}}});