define([],function(){"use strict";function a(a){function b(a){k.push(a)}function c(a){var b=a.split(/[\?\&]/),c={};return b.forEach(function(a){if(a.length>0){var b=a.split("=");b[0].length>0&&(c[decodeURIComponent(b[0])]=decodeURIComponent(b[1]))}}),c}function d(){var a,b,d=[],e={};return window.location.hash&&window.location.hash.length>1&&(a=window.location.hash.substr(1),b=a.split("?",2),2===b.length&&(e=c(b[1])),d=b[0].split("/").filter(function(a){return a.length>0})),{path:d,query:e}}function e(a){var b,c,d,e,f,g,h,i,j;if(0===a.path.length&&0===Object.keys(a.query).length)return{request:a,params:{},route:l};for(c=0;c<k.length;c+=1)if(e=k[c],e.path.length===a.path.length){for(f={},g=!0,d=0;d<a.path.length;d+=1){if(h=e.path[d],i=typeof h,"string"===i&&h!==a.path[d]){g=!1;break}"object"===i&&"param"===h.type&&(f[h.name]=a.path[d])}if(g){b={request:a,params:f,route:e};break}}return b?(j=b.route.queryParams||{},Object.keys(a.query).forEach(function(c){var d=j[c];d&&(b.params[c]=a.query[c])}),b):{request:a,params:{},route:m}}function f(){var a=d();return e(a)}function g(){return k.map(function(a){return a.path})}function h(a){return Object.keys(a).map(function(b){return b+"="+encodeURIComponent(a[b])}).join("&")}function i(a){"string"==typeof a&&(a={path:a});var b;b=a.path.pop?a.path.join("/"):a.path,a.params&&(b+="?"+h(a.params)),window.location.hash="#"+b}function j(a,b){b?window.open(a):window.location.replace(a)}var k=[],l=a.defaultRoute,m=a.notFoundRoute;if(!l)throw new Error("The defaultRoute must be provided");if(!m)throw new Error("The notFound route must be provided");return{addRoute:b,listRoutes:g,findCurrentRoute:f,getCurrentRequest:d,findRoute:e,navigateTo:i,redirectTo:j}}return{make:function(b){return a(b)}}});