define(["jquery","kb/widget/legacy/widget"],function(a){a.KBWidget({name:"kbasePrompt",version:"1.0.0",options:{controls:["cancelButton","okayButton"],modalClass:"fade",keyboard:!0},init:function(a){return this._super(a),this},openPrompt:function(){this.dialogModal().modal({keyboard:this.options.keyboard})},closePrompt:function(){this.dialogModal().modal("hide")},cancelButton:function(){return{name:"Cancel",callback:function(a,b){b.closePrompt()}}},okayButton:function(){return{name:"Okay",type:"primary",callback:function(a,b){b.closePrompt()}}},dialogModal:function(){if(void 0!==this.data("dialogModal"))return this.data("dialogModal");var b=a("<div></div>").attr("class","modal "+this.options.modalClass).attr("tabindex","-1").append(a.jqElem("div").addClass("modal-dialog").append(a.jqElem("div").addClass("modal-content").append(a("<div></div>").attr("class","modal-header").append(a("<button></button>").attr("type","button").attr("class","close").attr("data-dismiss","modal").attr("aria-hidden","true").append("x\n")).append(a("<h3></h3>").addClass("modal-title").attr("id","title"))).append(a("<div></div>").attr("class","modal-body").attr("id","body")).append(a("<div></div>").attr("class","modal-footer").append(a("<div></div>").addClass("row").addClass("form-horizontal").append(a("<div></div>").addClass("col-sm-5").addClass("text-left").attr("id","footer")).append(a("<div></div>").addClass("col-sm-7").attr("id","controls").css("white-space","nowrap"))))));b.unbind("keypress"),b.keypress(function(c){13===c.keyCode&&(c.stopPropagation(),c.preventDefault(),a("a:last",b).trigger("click"))}),this._rewireIds(b,b),this.options.title&&b.data("title").append(this.options.title),this.options.body&&b.data("body").append(this.options.body),this.options.footer&&b.data("footer").append(this.options.footer);var c=this;a.each(this.options.controls,function(d,e){"string"==typeof e&&(e=c[e]());var f="btn btn-default";e.type&&(f=f+" btn-"+e.type);var g=a("<a></a>").attr("href","#").attr("class",f).append(e.name).bind("click",function(a){a.preventDefault(),a.stopPropagation(),e.callback.call(this,a,c)});e.id&&g.attr("id",e.id),b.data("controls").append(g)}),this._rewireIds(b,b),this.data("dialogModal",b);var d=void 0,e=!1;return b.on("shown.bs.modal",a.proxy(function(){a.each(b.find("input[type=text],input[type=password],textarea"),function(b,c){return void 0===d&&(d=a(c)),a(c).is("input")&&void 0===a(c).val()?(a(c).focus(),void(e=!0)):a(c).is("textarea")&&0===a(c).text().length?(a(c).focus(),void(e=!0)):void 0}),e||void 0===d||d.focus()},this)),b}})});