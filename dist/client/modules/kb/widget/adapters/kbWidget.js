define(["jquery","underscore","bluebird","kb/common/html"],function(a,b,c,d){"use strict";function e(b,c){var e=d.genId(),f=d.tag("div"),g=d.tag("span");return b.html(f({"class":"panel panel-default "},[f({"class":"panel-heading"},[g({"class":"panel-title"},c)]),f({"class":"panel-body"},[f({id:e})])])),a("#"+e)}function f(d){function f(a){return new c(function(a,b){require([r],function(){a()},function(a){b(a)})})}function g(b){return new c(function(c,d){m=b,n=document.createElement("div"),m.appendChild(n),o=t?e(a(n),u):a(n),void 0===o[s]?d("Sorry, cannot find jquery widget "+s):c()})}function h(a){return new c(function(c){var d=b.extendOwn({},a,{wsNameOrId:a.workspaceId,objNameOrId:a.objectId,ws_url:q.getConfig("services.workspace.url"),token:q.getService("session").getAuthToken(),runtime:q});p=o[s](d),c()})}function i(a){return new c(function(a){a()})}function j(){return new c(function(a){a()})}function k(){return new c(function(a){a()})}function l(){return new c(function(a){a()})}var m,n,o,p,q=d.runtime,r=d.widget.module,s=d.widget.jquery_object,t=d.widget.panel,u=d.widget.title;return{init:f,attach:g,start:h,run:i,stop:j,detach:k,destroy:l}}return{make:function(a){return f(a)}}});