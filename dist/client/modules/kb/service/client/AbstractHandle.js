define(["jquery","bluebird"],function(a,b){"use strict";function c(c,d,e){function f(){if(!i){if(i=!0,!window.console)return;console.log("DEPRECATION WARNING: '*_async' method names will be removed","in a future version. Please use the identical methods without","the'_async' suffix.")}}function g(c,d,e,f,g){var i=a.Deferred();"function"==typeof f&&i.done(f),"function"==typeof g&&i.fail(g);var l={params:d,method:c,version:"1.1",id:String(Math.random()).slice(2)},m=null,n=k&&"function"==typeof k?k():j.token?j.token:null;null!==n&&(m=function(a){a.setRequestHeader("Authorization",n)});var o=jQuery.ajax({url:h,dataType:"text",type:"POST",processData:!1,data:JSON.stringify(l),beforeSend:m,success:function(a,b,c){var d;try{var f=JSON.parse(a);d=1===e?f.result[0]:f.result}catch(g){return void i.reject({status:503,error:g,url:h,resp:a})}i.resolve(d)},error:function(a,b,c){var d;if(a.responseText)try{var e=JSON.parse(a.responseText);d=e.error}catch(f){d="Unknown error - "+a.responseText}else d="Unknown Error";i.reject({status:500,error:d})}}),p=i.promise();return p.xhr=o,b.resolve(p)}this.url=c;var h=c,i=!1;("string"!=typeof h||0===h.length)&&(h="http://localhost:7109");var j=d?d:{token:"",user_id:""},k=e;this.new_handle=function(a,b){return g("AbstractHandle.new_handle",[],1,a,b)},this.new_handle_async=function(a,b){return f(),g("AbstractHandle.new_handle",[],1,a,b)},this.localize_handle=function(a,b,c,d){return g("AbstractHandle.localize_handle",[a,b],1,c,d)},this.localize_handle_async=function(a,b,c,d){return f(),g("AbstractHandle.localize_handle",[a,b],1,c,d)},this.initialize_handle=function(a,b,c){return g("AbstractHandle.initialize_handle",[a],1,b,c)},this.initialize_handle_async=function(a,b,c){return f(),g("AbstractHandle.initialize_handle",[a],1,b,c)},this.persist_handle=function(a,b,c){return g("AbstractHandle.persist_handle",[a],1,b,c)},this.persist_handle_async=function(a,b,c){return f(),g("AbstractHandle.persist_handle",[a],1,b,c)},this.upload=function(a,b,c){return g("AbstractHandle.upload",[a],1,b,c)},this.upload_async=function(a,b,c){return f(),g("AbstractHandle.upload",[a],1,b,c)},this.download=function(a,b,c,d){return g("AbstractHandle.download",[a,b],0,c,d)},this.download_async=function(a,b,c,d){return f(),g("AbstractHandle.download",[a,b],0,c,d)},this.upload_metadata=function(a,b,c,d){return g("AbstractHandle.upload_metadata",[a,b],0,c,d)},this.upload_metadata_async=function(a,b,c,d){return f(),g("AbstractHandle.upload_metadata",[a,b],0,c,d)},this.download_metadata=function(a,b,c,d){return g("AbstractHandle.download_metadata",[a,b],0,c,d)},this.download_metadata_async=function(a,b,c,d){return f(),g("AbstractHandle.download_metadata",[a,b],0,c,d)},this.ids_to_handles=function(a,b,c){return g("AbstractHandle.ids_to_handles",[a],1,b,c)},this.ids_to_handles_async=function(a,b,c){return f(),g("AbstractHandle.ids_to_handles",[a],1,b,c)},this.hids_to_handles=function(a,b,c){return g("AbstractHandle.hids_to_handles",[a],1,b,c)},this.hids_to_handles_async=function(a,b,c){return f(),g("AbstractHandle.hids_to_handles",[a],1,b,c)},this.are_readable=function(a,b,c){return g("AbstractHandle.are_readable",[a],1,b,c)},this.are_readable_async=function(a,b,c){return f(),g("AbstractHandle.are_readable",[a],1,b,c)},this.is_readable=function(a,b,c){return g("AbstractHandle.is_readable",[a],1,b,c)},this.is_readable_async=function(a,b,c){return f(),g("AbstractHandle.is_readable",[a],1,b,c)},this.list_handles=function(a,b){return g("AbstractHandle.list_handles",[],1,a,b)},this.list_handles_async=function(a,b){return f(),g("AbstractHandle.list_handles",[],1,a,b)},this.delete_handles=function(a,b,c){return g("AbstractHandle.delete_handles",[a],0,b,c)},this.delete_handles_async=function(a,b,c){return f(),g("AbstractHandle.delete_handles",[a],0,b,c)},this.give=function(a,b,c,d,e){return g("AbstractHandle.give",[a,b,c],0,d,e)},this.give_async=function(a,b,c,d,e){return f(),g("AbstractHandle.give",[a,b,c],0,d,e)},this.ids_to_handles=function(a,b,c){return g("AbstractHandle.ids_to_handles",[a],1,b,c)},this.ids_to_handles_async=function(a,b,c){return f(),g("AbstractHandle.ids_to_handles",[a],1,b,c)}}return c});