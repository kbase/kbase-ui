function LPHelp(a,b,c){$(".api-url-submit").click(function(){var b=$(this).parents("form"),d="/"+b.attr("type")+"/"+b.find("#input1").val();b.find("#input2").val()&&(d=d+"/"+b.find("#input2").val()),b.find("#input3").val()&&(d=d+"/"+b.find("#input3").val()),a.$apply(c.path(d))})}function ScrollCtrl(a,b,c){a.gotoAnchor=function(a){b.hash(a),c()}}app.controller("methodAccordion",function(a,b,c){}).controller("Analysis",function(a,b,c,d,e,f){if(a.narrative=e,a.ddSelected=e.current_ws,a.ws=a.ddSelected,!e.ws_objects){var g=kb.ws.list_objects({workspaces:[a.ddSelected]});$.when(g).done(function(b){a.$apply(function(){e.ws_objects=b;var a={};for(var c in b){var d=b[c][2].split("-")[0],f={name:b[c][1],id:b[c][0]};d in a?a[d].push(f):a[d]=[f]}e.wsObjsByType=a})})}var h=kb.ws.list_workspace_info({perm:"w"});$.when(h).then(function(b){function c(a,b){var c=kb.ui.getTimestamp(b[3]),d=kb.ui.getTimestamp(a[3]);return d>c?-1:c>d?1:0}var b=b.sort(c),d=[];for(var f in b)d.push({name:b[f][1],id:b[f][0]});a.$apply(function(){e.ws_list=d})}),a.$watch("ddSelected",function(c){var d=kb.ws.list_objects({workspaces:[c]});$.when(d).done(function(d){a.$apply(function(){e.ws_objects=d,e.current_ws!=c&&(e.current_ws=c,b.go("analysis.objects",null,{reload:!0}))})})})}).controller("Upload",function(a,b,c,d){a.shockURL="http://140.221.67.190:7078",a.uploadFile=function(b){function c(c){if(c.lengthComputable){var d=c.loaded/b[0].size;a.$apply(function(){a.uploadProgress=Math.floor(100*d)})}}a.$apply(function(){a.uploadComplete=!1});var d=new FormData($("form")[0]);$.ajax({url:a.shockURL+"/node",type:"POST",xhr:function(){var a=$.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",c,!1),a},beforeSend:function(a){a.setRequestHeader("Authorization",SHOCK.auth_header.Authorization)},success:function(b){a.$apply(function(){a.uploadProgress=0,a.uploadComplete=!0})},error:function(a){console.log("fail",a)},data:d,cache:!1,contentType:!1,processData:!1})}}).controller("RxnDetail",function(a,b){a.ids=b.ids.split("&")}).controller("CpdDetail",function(a,b){a.ids=b.ids.split("&")}).controller("MVHelp",function(a,b,c){$(".api-url-submit").click(function(){var b=$(this).parents("form"),d="/"+b.attr("type")+"/"+b.find("#input1").val();b.find("#input2").val()&&(d=d+"/"+b.find("#input2").val()),a.$apply(c.path(d))})}).controller("GenomeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={genomeID:b.id,workspaceID:b.ws,kbCache:kb}}).controller("GeneDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.gid+"?sub=Feature&subid="+b.fid),a.params={genomeID:b.gid,featureID:b.fid,workspaceID:b.ws,version:b.ver,kbCache:kb}}).controller("MediaDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.ws=b.ws,a.id=b.id}).controller("ModelDetailCards",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.ws=b.ws,a.id=b.id}).controller("MemeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("CmonkeyDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("InferelatorDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("MAKDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,workspace:b.ws,kbCache:kb}}).controller("FloatDataTable",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,workspace:b.ws,kbCache:kb}}).controller("RegpreciseDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("BambiDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={bambi_run_result_id:b.id,workspace_id:b.ws}}).controller("PPIDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("SpecDetail",function(a,b){a.params={kind:b.kind,id:b.id},require(["kb.widget.navbar"],function(a){a.clearMenu().addDefaultMenu({search:!0,narrative:!0})})}).controller("GPTypeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("GTTypeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("GVTypeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("GGLTypeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("GTVTypeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("ModelDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.ws=b.ws,a.id=b.id}).controller("ModelDetailCards",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.ws=b.ws,a.id=b.id}).controller("FBADetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.ws=b.ws,a.id=b.id}).controller("FBADetailCards",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.ws=b.ws,a.id=b.id}).controller("WSObjects",function(a,b,c){var d=c.path().match(/\/\w*\/*/g)[0].replace("/","").replace("/","");a.type=d,a.ws=b.ws}).controller("WsRefViewer",function(a,b){a.params={id:b.id,ws:b.ws,version:b.version,kbCache:kb}}).controller("WsRefUsersViewer",function(a,b){a.params={id:b.id,ws:b.ws,version:b.version,kbCache:kb}}).controller("WsObjGraphView",function(a,b){a.params={ws:b.ws,kbCache:kb}}).controller("WsObjGraphCenteredView",function(a,b){a.params={ws:b.ws,id:b.id,kbCache:kb}}).controller("People",function(a,b,c){if(a.params={userid:b.userid,kbCache:kb},!$.KBaseSessionSync.isLoggedIn()){var d=window.location.hash,e="/login/";return d&&d.length>0&&(e+="?nextPath="+encodeURIComponent(d.substr(1))),void c.url(e)}$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href","views/social/user-page/style.css"),require(["kb.widget.navbar"],function(a){a.clearMenu().addDefaultMenu({search:!0,narrative:!0})})}).controller("Dashboard",function(a,b,c){return a.params={kbCache:kb},$.KBaseSessionSync.isLoggedIn()?($("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href","views/dashboard/style.css"),$("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet"}).attr("href","/src/widgets/dashboard/style.css"),void require(["kb.widget.navbar","kb.statemachine"],function(b,c){b.clearMenu().addDefaultMenu({search:!0,narrative:!0,dashboard:!1}).setTitle("Dashboard"),a.viewState=Object.create(c).init();var d=0;a.heartbeatTimer=window.setInterval(function(){d++,postal.channel("app").publish("heartbeat",{heartbeat:d})},100),a.$on("$destroy",function(){window.clearInterval(a.heartbeatTimer)})})):void c.url("/login/")}).controller("NavTest",function(a,b){a.params={appid:b.appid,kbCache:kb}}).controller("App",function(a,b){a.params={appid:b.appid,kbCache:kb},$("#sortable-landing").sortable({placeholder:"drag-placeholder",handle:".panel-heading",cancel:".panel-title,.panel-subtitle,.label,.glyphicon",start:function(){$(this).find(".panel-body").addClass("hide"),$(this).sortable("refreshPositions")},stop:function(){$(this).find(".panel-body").removeClass("hide")}})}).controller("Trees",function(a,b){a.ws=b.ws,a.id=b.id}).controller("Taxonomy",function(a,b){a.params={taxonname:b.taxonname,ws:b.ws,kbCache:kb}}).controller("WB",function(a,b,c){a.ws=b.ws,a.type=b.type,require(["kb.widget.navbar"],function(a){a.clearMenu().addDefaultMenu({search:!0,narrative:!0})}),a.nar_url=configJSON.narrative_url;var d=c.path().split("/")[1];"narratives"==d&&(a.tab=c.path().split("/")[2]),a.showPreviousChanges=function(){$("#previous-changes").slideToggle()},a.hideSidebar=function(a){$("#ws-sidebar").toggle("slide",{direction:"left",duration:"fast",complete:function(){$state.transitionTo(a,{ws:ws,id:id})}})}}).controller("Login",function(a,b,c,d){return $.KBaseSessionSync.isLoggedIn()?void(b.nextPath?c.url(b.nextPath):c.path("/dashboard")):(require(["kb.widget.navbar"],function(a){a.clear().addDefaultMenu({search:!1,narrative:!1,dashboard:!1}).setTitle("Sign In to KBase")}),a.nar_url=configJSON.narrative_url,"/login"==b.nextPath?a.nextPath=null:a.nextPath=b.nextPath,a.loginUser=function(a,b,c){require(["kb.session","postal","jquery"],function(d,e,f){f("#loading-indicator").show();var g=a?a.username:null,h=a?a.password:null;f("#login_error").hide(),d.login({username:g,password:h}).then(function(a){e.channel("session").publish("login.success",{session:d,nextPath:b,nextURL:c})})["catch"](function(a){f("#loading-indicator").hide(),"LoginFailure: Authentication failed."===a&&(a="Login Failed: your username/password is incorrect."),f("#login_error").html(a),f("#login_error").show()}).done()})},void a.$on("$destroy",function(){}))}).controller("WBLanding",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.ws=b.ws,a.id=b.id,$("#sortable-landing").sortable({placeholder:"drag-placeholder",handle:".panel-heading",cancel:".panel-title,.panel-subtitle,.label,.glyphicon",start:function(){$(this).find(".panel-body").addClass("hide"),$(this).sortable("refreshPositions")},stop:function(){$(this).find(".panel-body").removeClass("hide")}})}).controller("WBGeneLanding",function(a,b){if(window.location.replace("#/dataview/"+b.ws+"/"+b.gid+"?sub=Feature&subid="+b.fid),a.ws=b.ws,a.fid=b.fid,a.gid=b.gid,"CDS"==a.ws&&(a.ws="KBasePublicGenomesV3"),!a.gid){var c=a.fid.split(".");c.length>3&&(a.gid=c[0]+"."+c[1])}a.id=a.gid,$("#sortable-landing").sortable({placeholder:"drag-placeholder",handle:".panel-heading",cancel:".panel-title,.panel-subtitle,.label,.glyphicon",start:function(){$(this).find(".panel-body").addClass("hide"),$(this).sortable("refreshPositions")},stop:function(){$(this).find(".panel-body").removeClass("hide")}})}).controller("WBModelLanding",function(a,b,c){var d=c.path().split("/")[2];"fbas"==d?d="FBA":"models"==d&&(d="Model"),a.type=d,a.ws=b.ws,a.id=b.id,a.selected=[{workspace:a.ws,name:a.id}],a.defaultMap=b.map,$("#sortable-landing").sortable({placeholder:"drag-placeholder",handle:".panel-heading",cancel:".panel-title,.panel-subtitle,.label,.glyphicon",start:function(){$(this).find(".panel-body").addClass("hide"),$(this).sortable("refreshPositions")},stop:function(){$(this).find(".panel-body").removeClass("hide")}})}).controller("WSManage",function(a,b){}).controller("MV",function(a,b,c,d,e){function f(a,b){return a.timestamp<b.timestamp?-1:a.timestamp>b.timestamp?1:0}var g=d.path().split("/")[2];a.type=g,a.ws=c.ws,a.id=c.id,b.org_name="loading",a.selected=[{workspace:a.ws,name:a.id}],a.fba_refs=[],a.ref_obj_prom=kb.ws.list_referencing_objects(a.selected),$.when(a.ref_obj_prom).done(function(b){var b=b[0];for(var c in b){var d=b[c],e=d[2].split("-")[0];"KBaseFBA.FBA"==e&&a.fba_refs.push({ws:d[7],name:d[1],date:kb.ui.formateDate(d[3]),timestamp:kb.ui.getTimestamp(d[3])})}a.fba_refs.sort(f)})}).controller("WBJSON",function(a,b){a.ws=b.ws,a.id=b.id}).controller("WBTour",function(a,b,c,d){function e(){a.checkedList.push(["kb|g.0.fbamdl","chenryExample","FBAModel-2.0"]),a.$apply(),$(".ncheck").eq(2).addClass("ncheck-checked")}function f(){a.$apply(b.go("ws"))}if(a.ws="chenryExample",USER_ID){var g=[{element:".btn-new-ws",text:"Create a new workspace here",placement:"bottom"},{element:".btn-ws-settings",n:2,text:"Manage workspsace sharing and other settings, as                         well as clone and delete workspaces using the gear button.",bVisible:!0,time:4e3},{element:".obj-id",n:2,text:"View data about the object, including visualizations and KBase widgets"},{element:".show-versions",n:2,text:"View the objects history."},{element:".btn-show-info",n:2,text:"View meta data,  download the objects, etc",bVisible:!0},{element:".ncheck",n:2,text:"Select objects by using checkboxes<br> and see options appear above",event:e},{element:".btn-table-settings",text:"Show and hide columns and set other object table settings"},{element:".type-filter",text:"Filter objects by type"},{element:".btn-delete-obj",text:"Delete the objects selected in the table"},{element:".btn-mv-dd",text:"Go ahead, copy your colleague's objects to your own workspace"},{element:".btn-rename-obj",text:"Rename a selected object"},{element:".btn-trash",text:"View the trash bin for this workspace.<br>                                      Unreferenced objects will be deleted after 30 days."}];new Tour({tour:g,exit_callback:f})}else{var h=$("#signin-button");h.popover({content:"You must login before taking the tour",trigger:"manual",placement:"bottom"}),h.popover("show")}}).controller("Favorites",function(a,b,c,d,e){a.selected=[{workspace:"chenrydemo",name:"kb|g.9.fbamdl.25.fba.55"}],a.fav,a.updateFavs=function(){a.prom=kb.ujs.get_has_state("favorites","queue",0);var b=$.getJSON("landing_page_map.json");$.when(a.prom,b).done(function(b,c){a.obj_mapping=c[0],a.favs=b[0]?b[1]:[],a.fav_by_kind=a.processData(),a.$apply()})},a.processData=function(){fav_by_kind={};var b=a.favs;for(var c in b){var d=b[c].type.split("-")[0],e=b[c].module;if(e in a.obj_mapping&&a.obj_mapping[e]&&a.obj_mapping[e][d])var f=a.obj_mapping[e][d];else var f=void 0;var g=f;switch(d){case"FBA":g="ws.mv.fba";break;case"FBAModel":g="ws.mv.model";break;case"Media":g="ws.media";break;case"MetabolicMap":g="ws.maps";break;case"Media":g="ws.media"}b[c].route=g,d in fav_by_kind?fav_by_kind[d].push(a.favs[c]):(fav_by_kind[d]=[],fav_by_kind[d].push(a.favs[c]))}return fav_by_kind},a.rmObject=function(b,c,e,f){for(var g in a.favs)a.favs[g].ws==b&&a.favs[g].id==c&&a.favs[g].type==e&&a.favs.splice(g,1);d.remove(b,c,e,f),a.fav_by_kind=a.processData()},a.clearList=function(){d.clear(),a.fav_by_kind=[]},a.displayViewer=function(c,d,e){c?b.transitionTo(c,{ws:d,id:e}):b.transitionTo("ws.json",{ws:d,id:e}),a.$apply()},a.AccordionCtrl=function(a){a.oneAtATime=!0,a.items=["Item 1","Item 2","Item 3"],a.addItem=function(){var b=a.items.length+1;a.items.push("Item "+b)}}}).controller("TreeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("PangenomeDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("MSADetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}).controller("KidlEdtDetail",function(a,b){a.params={type:b.type,mod:b.mod}}).controller("JGI",function(a,b){a.params={ws:b.ws,obj:b.obj},require(["kb.widget.navbar"],function(a){a.clearMenu().addDefaultMenu({search:!0,narrative:!0})})}).controller("narrativemanager",function(a,b,c){if($.KBaseSessionSync.isLoggedIn())a.params=b,require(["kb.widget.navbar"],function(a){a.clearMenu().addDefaultMenu({search:!0,narrative:!0})});else{var d=window.location.hash,e="/login/";d&&d.length>0&&(e+="?nextPath="+encodeURIComponent(d.substr(1))),c.url(e)}}).controller("NarrativeStore",function(a,b){a.params=b,require(["kb.widget.navbar"],function(a){a.clearMenu().addDefaultMenu({search:!0,narrative:!0})})}).controller("JsonDetail",function(a,b){a.params={id:b.id,ws:b.ws}}).controller("ContigSetDetail",function(a,b){window.location.replace("#/dataview/"+b.ws+"/"+b.id),a.params={id:b.id,ws:b.ws}}),angular.module("angular-json-rpc",[]).config(["$provide",function(a){return a.decorator("$http",["$delegate",function(a){return a.jsonrpc=function(b,c,d,e){var f={jsonrpc:"2.0",method:c,params:d,id:1};return a.post(b,f,angular.extend({headers:{"Content-Type":"application/json"}},e))},a}])}]);