angular.module("communities-directives",[]),angular.module("communities-directives").directive("metagenome",function(a){return{link:function(a,b,c){$(b).loading();var d=kb.ws.get_objects([{workspace:a.ws,name:a.id}]);$.when(d).done(function(a){var c=a[0].data.ref.ID,d="https://kbase.us/services/communities/"+c+"?verbosity=mixs";$.get(d,function(a){$(b).rmLoading();var c=[{key:"PI_firstname"},{key:"status"},{key:"sequence_type"},{key:"collection_date"},{key:"feature"},{key:"PI_lastname"},{key:"latitude"},{key:"biome"},{key:"id",format:function(a){return'<a href="'+kb.metagenome_url+a.id+'" target="_blank">'+a.id+"</a>"}},{key:"project_name"},{key:"project_id"},{key:"env_package_type"},{key:"country"},{key:"longitude"},{key:"location"},{key:"name"},{key:"seq_method"},{key:"created"},{key:"material"}],d=kb.ui.objTable({keys:c,obj:a,keysAsLabels:!0,bold:!0});$(b).append(d)})}).fail(function(a){$(b).html('<div class="alert alert-danger">'+a.error.message+"</div>")})}}}).directive("communitiesCollection",function(){return{link:function(a,b,c){$(b).loading();var d=kb.ws.get_objects([{workspace:a.ws,name:a.id}]);$.when(d).done(function(c){$(b).rmLoading();var d=c[0].data;a.name=d.name,a.created=d.created,a.members=d.members,a.$apply()}).fail(function(a){$(b).html('<div class="alert alert-danger">'+a.error.message+"</div>")})}}}).directive("communitiesProfile",function(){return{link:function(a,b,c){function d(a){var c=[];for(var d in a.columns){var e=a.columns[d];c.push({sTitle:e.id})}var f={sPaginationType:"bootstrap",iaDisplayLength:10,aaData:a.data,aoColumns:c},g=$('<table class="table table-bordered table-striped" style="width: 100%;">');$(b).append(g),g.dataTable(f)}$(b).loading();var e=kb.ws.get_objects([{workspace:a.ws,name:a.id}]);$.when(e).done(function(a){$(b).rmLoading(),console.log("profile",a[0].data);var c=JSON.parse(a[0].data.data);$(b).append("<b>Type:</b>",c.type),d(c)}).fail(function(a){$(b).html('<div class="alert alert-danger">'+a.error.message+"</div>")})}}});