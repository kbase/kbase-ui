app.service("narrative",function(a){function b(a,b){for(var c=[],d=0;d<Object.keys(a).length;d++){var e=b+String(d);c.push(a[e])}return c}var c=this,d=USER_ID+":home";this.methods=[],this.method_dict={},this.cells=[],this.current_app,this.current_ws=d,this.ws_objects,this.wsObjsByType,this.tasks=[],this.addCell=function(a){var b=c.method_dict[a];console.log("add narrative cell:",a,b),c.cells.push(b)},this.removeCell=function(a){console.log("remove narrative cell",this.cells[a]),this.cells.splice(a,1)},this.setApp=function(a){var b=c.method_dict[a];c.current_app=b},this.newTask=function(a){c.tasks.push(a)},a.get("data/services.json").success(function(a){console.log("form data",a);var d=[],e={};for(var f in a){var g=f,h={name:g,methods:[]},i=a[g].methods;for(var j in i){var k=i[j],l=k.title,m={title:k.title,description:k.description,input:k.properties.widgets.input,output:k.properties.widgets.output,params:b(k.properties.parameters,"param"),returns:b(k.returns,"output")},n={title:k.title,description:k.description};h.methods.push(n),e[l]=m}d.push(h)}c.methods=d,c.method_dict=e})});