define(["q"],function(a){"use strict";var b=Object.create({},{version:{value:"0.0.2",writable:!1},init:{value:function(a){return this.queue=[],this.queuePauseTime=a&&a.queuePauseTime||100,this}},run:{value:function(){var a=this;return this.timer=window.setTimeout(function(){a.processQueue()}.bind(this),this.queuePauseTime),this}},processQueue:{value:function(){var a=this.queue;this.queue=[];for(var b=a.shift();b;){try{b.onRun(this)}catch(c){if(b.onError)try{b.onError(c)}catch(d){}}b=a.shift()}return this}},addItem:{value:function(a){return this.queue.push(a),this.run(),this}}});return b});