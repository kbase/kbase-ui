!function(a,b){a.KBWidget({name:"kbasePrompt",version:"1.0.0",options:{controls:["closeButton"],modalClass:"fade"},init:function(a){return this._super(a),this},openPrompt:function(){this.dialogModal().modal({keyboard:!0})},closePrompt:function(){this.dialogModal().modal("hide")},cancelButton:function(){return{name:"Cancel",callback:function(a,b){b.closePrompt()}}},okayButton:function(){return{name:"Okay",type:"primary",callback:function(a,b){b.closePrompt()}}},closeButton:function(){return{name:"Close",type:"primary",callback:function(a,b){b.closePrompt()}}},dialogModal:function(){if(this.data("dialogModal")!=b)return this.data("dialogModal");var c=a("<div></div>").attr("class","modal "+this.options.modalClass).attr("tabindex","-1").append(a.jqElem("div").addClass("modal-dialog").append(a.jqElem("div").addClass("modal-content").append(a("<div></div>").attr("class","modal-header").append(a("<button></button>").attr("type","button").attr("class","close").attr("data-dismiss","modal").attr("aria-hidden","true").append("x\n")).append(a("<h3></h3>").addClass("modal-title").attr("id","title"))).append(a("<div></div>").attr("class","modal-body").attr("id","body")).append(a("<div></div>").attr("class","modal-footer").append(a("<div></div>").addClass("row").addClass("form-horizontal").append(a("<div></div>").addClass("col-md-6").addClass("text-left").attr("id","footer")).append(a("<div></div>").addClass("col-md-6").attr("id","controls").css("white-space","nowrap"))))));c.unbind("keypress"),c.keypress(function(b){13==b.keyCode&&(b.stopPropagation(),b.preventDefault(),a("a:last",c).trigger("click"))}),this._rewireIds(c,c),this.options.title&&c.data("title").append(this.options.title),this.options.body&&c.data("body").append(this.options.body),this.options.footer&&c.data("footer").append(this.options.footer);var d=this;a.each(this.options.controls,function(b,e){"string"==typeof e&&(e=d[e]());var f="btn btn-default";e.type&&(f=f+" btn-"+e.type);var g=a("<a></a>").attr("class",f).append(e.name).bind("click",function(a){a.preventDefault(),a.stopPropagation(),e.callback.call(this,a,d)});e.id&&g.attr("id",e.id),c.data("controls").append(g)}),this._rewireIds(c,c),this.data("dialogModal",c);var e=b,f=!1;return c.on("shown.bs.modal",a.proxy(function(){a.each(c.find("input[type=text],input[type=password],textarea"),function(c,d){return e==b&&(e=a(d)),a(d).is("input")&&a(d).val()==b?(a(d).focus(),void(f=!0)):a(d).is("textarea")&&0==a(d).text().length?(a(d).focus(),void(f=!0)):void 0}),f||e==b||e.focus()},this)),c},addAlert:function(b,c){this.data("dialogModal").find(".alert")&&this.rmAlert();var d=a('<div class="alert'+(c?" alert-"+c:" alert-danger")+'">'+b+"</div>");return b&&this.data("dialogModal").find(".modal-body").prepend(d),this},rmAlert:function(a){return this.data("dialogModal").find(".alert").remove(),this},addCover:function(b){this.data("dialogModal").find(".modal-cover")&&this.rmCover();var c=a('<div class="modal-cover">                              <div class="modal-cover-table">                                <div class="modal-cover-cell">                                  <span class="modal-cover-box"></span>                                </div>                              </div>                            </div>');return c.hide(),b&&(c.find(".modal-cover-box").html(b),c.show()),a(".modal-body").append(c),this},getCover:function(){return this.data("dialogModal").find(".modal-cover-box")},rmCover:function(a){return this.data("dialogModal").find(".modal-cover").remove(),this}})}(jQuery);